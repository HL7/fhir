<?xml version="1.0" encoding="UTF-8"?>
<ExampleScenario xmlns="http://hl7.org/fhir" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://hl7.org/fhir ../../schema/fhir-single.xsd">
  <id value="example"/>
  <title value="Mobile Medication Administration"/>
  <status value="draft"/>
  <description value="Bla"/>
  <actor>
    <key value="Clin"/>
    <type value="person"/>
    <title value="MD"/>
    <description value="The Clinician"/>
  </actor>
  <actor>
    <key value="EMR"/>
    <type value="system"/>
    <title value="EMR"/>
    <description value="EMR"/>
  </actor>
  <actor>
    <key value="LabMan"/>
    <type value="person"/>
    <title value="Lab Man"/>
    <description value="Lab Person"/>
  </actor>
  <actor>
    <key value="Lab"/>
    <type value="system"/>
    <title value="Lab"/>
    <description value="Lab"/>
  </actor>
  <instance>
    <key value="req0"/>
    <structureType>
      <system value="http://hl7.org/fhir/fhir-types"/>
      <code value="ServiceDefinition"/>
    </structureType>
    <title value="Original Request for 10 procedures"/>
    <description value="Bla"/>
  </instance>
  <instance>
    <key value="spec1"/>
    <structureType>
      <system value="http://hl7.org/fhir/fhir-types"/>
      <code value="Specimen"/>
    </structureType>
    <title value="Specimen already collected"/>
    <description value="Bla"/>
  </instance>
  <instance>
    <key value="req1"/>
    <structureType>
      <system value="http://hl7.org/fhir/fhir-types"/>
      <code value="ServiceDefinition"/>
    </structureType>
    <title value="Request for an extra procedure"/>
    <description value="Bla"/>
  </instance>
  <instance>
    <key value="task1"/>
    <structureType>
      <system value="http://hl7.org/fhir/fhir-types"/>
      <code value="Task"/>
    </structureType>
    <title value="Task"/>
    <description value="The task..."/>
    <version>
      <key value="task1v1"/>
      <description value="Initially created"/>
    </version>
    <version>
      <key value="task1v2"/>
      <description value="Accepted"/>
    </version>
    <version>
      <key value="task1v3"/>
      <description value="In progress"/>
    </version>
    <version>
      <key value="task1v4"/>
      <description value="Completed"/>
    </version>
  </instance>
  <instance>
    <key value="reql1"/>
    <structureType>
      <system value="http://hl7.org/fhir/fhir-types"/>
      <code value="ServiceDefinition"/>
    </structureType>
    <title value="Lab's request for the extra procedure"/>
    <description value="Bla"/>
  </instance>
  <process>
    <title value="Add-on Order"/>
    <description value="Add on order blah blah"/>
    <preConditions value="Previous order exists, specimen already collected."/>
    <postConditions value="All is fine."/>
    <step>
      <number value="1"/>
      <operation>
        <title value="Make a call"/>
        <initiator value="Clin"/>
        <receiver value="LabMan"/>
      </operation>
      <pause value="true"/>
    </step>
    <step>
      <number value="2"/>
      <operation>
        <title value="Create new EMR order"/>
        <initiator value="Clin"/>
        <receiver value="EMR"/>
        <request>
          <instanceReference value="req1"/>
        </request>
      </operation>
    </step>
    <step>
      <number value="2"/>
      <process>
        <title value="Create Lab task"/>
        <description value="asdasdasd"/>
        <step>
          <number value="2.1"/>
          <operation>
            <title value="Create Lab's task "/>
            <initiator value="EMR"/>
            <receiver value="EMR"/>
            <request>
              <instanceReference value="task1"/>
              <versionReference value="task1v1"/>
            </request>
          </operation>
        </step>
        <step>
          <number value="2.2"/>
          <operation>
            <title value="Send task to Lab "/>
            <initiator value="EMR"/>
            <receiver value="Lab"/>
            <request>
              <instanceReference value="task1"/>
              <versionReference value="task1v1"/>            
            </request>
          </operation>
        </step>
      </process>
    </step>
    <step>
      <number value="3"/>
      <operation>
        <title value="Create lab's service order "/>
        <initiator value="Lab"/>
        <receiver value="Lab"/>
        <request>
          <instanceReference value="reql1"/>
        </request>
      </operation>
      <pause value="true"/>
    </step>
    <step>
      <number value="4"/>
      <operation>
        <title value="Task accepted"/>
        <initiator value="Lab"/>
        <receiver value="Lab"/>
        <request>
          <instanceReference value="task1"/>
          <versionReference value="task1v2"/>
        </request>
      </operation>
    </step>
    <step>
      <number value="5"/>
      <operation>
        <title value="Task in progress"/>
        <initiator value="Lab"/>
        <receiver value="Lab"/>
        <request>
          <instanceReference value="task1"/>
          <versionReference value="task1v3"/>
        </request>
      </operation>
    </step>
  </process>
</ExampleScenario>