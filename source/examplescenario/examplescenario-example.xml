<?xml version="1.0" encoding="UTF-8"?>
<ExampleScenario xmlns="http://hl7.org/fhir" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://hl7.org/fhir ../../schema/fhir-single.xsd">
  <text>
    <status value="additional"/>
    <div xmlns="http://www.w3.org/1999/xhtml"><p> <b> Generated Narrative: ExampleScenario</b> <a name="example"> </a> </p> <div style="display: inline-block; background-color: #d9e0e7; padding: 6px; margin: 4px; border: 1px
       solid #8da1b4; border-radius: 5px; line-height: 60%"><p style="margin-bottom: 0px">Resource ExampleScenario &quot;example&quot; </p> </div> <p> <b> status</b> : draft</p> <p> <b> purpose</b> : Purpose: this serves to enable remote performing of medication administration, by using remote / mobile devices to a) Get the planned medication administrations and b) Record the performing of these administrations without a permanent connection to the EHR.</p> <svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentStyleType="text/css" height="690px" preserveAspectRatio="none" style="width:697px;height:690px;background:#FFFFFF;" version="1.1" viewBox="0 0 697 690" width="697px" zoomAndPan="magnify"><defs/><g><rect fill="none" height="26.2969" id="_title" style="stroke:none;stroke-width:1.0;" width="286" x="204.75" y="10"/><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="276" x="209.75" y="27.9951">Mobile Medication Administration</text><rect fill="#FFFFFF" height="102.5313" style="stroke:#181818;stroke-width:1.0;" width="10" x="43.5" y="167.8594"/><rect fill="#FFFFFF" height="194.9297" style="stroke:#FFFFFF;stroke-width:1.0;" width="10" x="43.5" y="350.6563"/><line style="stroke:#181818;stroke-width:1.0;" x1="43.5" x2="43.5" y1="350.6563" y2="545.5859"/><line style="stroke:#181818;stroke-width:1.0;" x1="53.5" x2="53.5" y1="350.6563" y2="545.5859"/><line style="stroke:#181818;stroke-width:1.0;" x1="43.5" x2="53.5" y1="350.6563" y2="350.6563"/><rect fill="#FFFFFF" height="101.3984" style="stroke:#FFFFFF;stroke-width:1.0;" width="10" x="43.5" y="573.5859"/><line style="stroke:#181818;stroke-width:1.0;" x1="43.5" x2="43.5" y1="573.5859" y2="674.9844"/><line style="stroke:#181818;stroke-width:1.0;" x1="53.5" x2="53.5" y1="573.5859" y2="674.9844"/><line style="stroke:#181818;stroke-width:1.0;" x1="43.5" x2="53.5" y1="674.9844" y2="674.9844"/><rect fill="#FFFFFF" height="110.5313" style="stroke:#FFFFFF;stroke-width:1.0;" width="10" x="278.5" y="167.8594"/><line style="stroke:#181818;stroke-width:1.0;" x1="278.5" x2="278.5" y1="167.8594" y2="278.3906"/><line style="stroke:#181818;stroke-width:1.0;" x1="288.5" x2="288.5" y1="167.8594" y2="278.3906"/><line style="stroke:#181818;stroke-width:1.0;" x1="278.5" x2="288.5" y1="167.8594" y2="167.8594"/><rect fill="#FFFFFF" height="239.1953" style="stroke:#FFFFFF;stroke-width:1.0;" width="10" x="278.5" y="306.3906"/><line style="stroke:#181818;stroke-width:1.0;" x1="278.5" x2="278.5" y1="306.3906" y2="545.5859"/><line style="stroke:#181818;stroke-width:1.0;" x1="288.5" x2="288.5" y1="306.3906" y2="545.5859"/><rect fill="#FFFFFF" height="101.3984" style="stroke:#FFFFFF;stroke-width:1.0;" width="10" x="278.5" y="573.5859"/><line style="stroke:#181818;stroke-width:1.0;" x1="278.5" x2="278.5" y1="573.5859" y2="674.9844"/><line style="stroke:#181818;stroke-width:1.0;" x1="288.5" x2="288.5" y1="573.5859" y2="674.9844"/><line style="stroke:#181818;stroke-width:1.0;" x1="278.5" x2="288.5" y1="674.9844" y2="674.9844"/><rect fill="none" height="61.3984" style="stroke:#000000;stroke-width:1.5;" width="341.5" x="10" y="370.6563"/><rect fill="none" height="61.3984" style="stroke:#000000;stroke-width:1.5;" width="341.5" x="10" y="446.0547"/><rect fill="none" height="17.1328" style="stroke:#000000;stroke-width:1.5;" width="158" x="30" y="521.4531"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="48" x2="48" y1="121.5938" y2="278.3906"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:1.0,4.0;" x1="48" x2="48" y1="278.3906" y2="306.3906"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="48" x2="48" y1="306.3906" y2="545.5859"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:1.0,4.0;" x1="48" x2="48" y1="545.5859" y2="573.5859"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="48" x2="48" y1="573.5859" y2="683.9844"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="283.5" x2="283.5" y1="121.5938" y2="278.3906"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:1.0,4.0;" x1="283.5" x2="283.5" y1="278.3906" y2="306.3906"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="283.5" x2="283.5" y1="306.3906" y2="545.5859"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:1.0,4.0;" x1="283.5" x2="283.5" y1="545.5859" y2="573.5859"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="283.5" x2="283.5" y1="573.5859" y2="683.9844"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="528.5" x2="528.5" y1="121.5938" y2="278.3906"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:1.0,4.0;" x1="528.5" x2="528.5" y1="278.3906" y2="306.3906"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="528.5" x2="528.5" y1="306.3906" y2="545.5859"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:1.0,4.0;" x1="528.5" x2="528.5" y1="545.5859" y2="573.5859"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="528.5" x2="528.5" y1="573.5859" y2="683.9844"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="647.5" x2="647.5" y1="121.5938" y2="278.3906"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:1.0,4.0;" x1="647.5" x2="647.5" y1="278.3906" y2="306.3906"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="647.5" x2="647.5" y1="306.3906" y2="545.5859"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:1.0,4.0;" x1="647.5" x2="647.5" y1="545.5859" y2="573.5859"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="647.5" x2="647.5" y1="573.5859" y2="683.9844"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="40" x="25.5" y="118.292">Nurse</text><ellipse cx="48.5" cy="59.7969" fill="#E2E2F0" rx="16" ry="16" style="stroke:#181818;stroke-width:1.5;"/><path d="M48.5,79.7969 C52.5,79.7969 55.5,79.7969 59.5,75.7969 C67.5,75.7969 75.5,83.7969 75.5,91.7969 L75.5,95.7969 C75.5,99.7969 71.5,103.7969 67.5,103.7969 L29.5,103.7969 C25.5,103.7969 21.5,99.7969 21.5,95.7969 L21.5,91.7969 C21.5,83.7969 29.5,75.7969 37.5,75.7969 C41.5,79.7969 44.5,79.7969 48.5,79.7969 " fill="#E2E2F0" style="stroke:#181818;stroke-width:1.5;"/><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="116" x="225.5" y="90.2969"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="102" x="232.5" y="110.292">Nurse's Tablet</text><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="130" x="463.5" y="90.2969"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="116" x="470.5" y="110.292">MAR / Scheduler</text><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="88" x="603.5" y="90.2969"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="74" x="610.5" y="110.292">MAR / EHR</text><rect fill="#FFFFFF" height="102.5313" style="stroke:#181818;stroke-width:1.0;" width="10" x="43.5" y="167.8594"/><rect fill="#FFFFFF" height="194.9297" style="stroke:#FFFFFF;stroke-width:1.0;" width="10" x="43.5" y="350.6563"/><line style="stroke:#181818;stroke-width:1.0;" x1="43.5" x2="43.5" y1="350.6563" y2="545.5859"/><line style="stroke:#181818;stroke-width:1.0;" x1="53.5" x2="53.5" y1="350.6563" y2="545.5859"/><line style="stroke:#181818;stroke-width:1.0;" x1="43.5" x2="53.5" y1="350.6563" y2="350.6563"/><rect fill="#FFFFFF" height="101.3984" style="stroke:#FFFFFF;stroke-width:1.0;" width="10" x="43.5" y="573.5859"/><line style="stroke:#181818;stroke-width:1.0;" x1="43.5" x2="43.5" y1="573.5859" y2="674.9844"/><line style="stroke:#181818;stroke-width:1.0;" x1="53.5" x2="53.5" y1="573.5859" y2="674.9844"/><line style="stroke:#181818;stroke-width:1.0;" x1="43.5" x2="53.5" y1="674.9844" y2="674.9844"/><rect fill="#FFFFFF" height="110.5313" style="stroke:#FFFFFF;stroke-width:1.0;" width="10" x="278.5" y="167.8594"/><line style="stroke:#181818;stroke-width:1.0;" x1="278.5" x2="278.5" y1="167.8594" y2="278.3906"/><line style="stroke:#181818;stroke-width:1.0;" x1="288.5" x2="288.5" y1="167.8594" y2="278.3906"/><line style="stroke:#181818;stroke-width:1.0;" x1="278.5" x2="288.5" y1="167.8594" y2="167.8594"/><rect fill="#FFFFFF" height="239.1953" style="stroke:#FFFFFF;stroke-width:1.0;" width="10" x="278.5" y="306.3906"/><line style="stroke:#181818;stroke-width:1.0;" x1="278.5" x2="278.5" y1="306.3906" y2="545.5859"/><line style="stroke:#181818;stroke-width:1.0;" x1="288.5" x2="288.5" y1="306.3906" y2="545.5859"/><rect fill="#FFFFFF" height="101.3984" style="stroke:#FFFFFF;stroke-width:1.0;" width="10" x="278.5" y="573.5859"/><line style="stroke:#181818;stroke-width:1.0;" x1="278.5" x2="278.5" y1="573.5859" y2="674.9844"/><line style="stroke:#181818;stroke-width:1.0;" x1="288.5" x2="288.5" y1="573.5859" y2="674.9844"/><line style="stroke:#181818;stroke-width:1.0;" x1="278.5" x2="288.5" y1="674.9844" y2="674.9844"/><polygon fill="#181818" points="266.5,163.8594,276.5,167.8594,266.5,171.8594,270.5,167.8594" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="53.5" x2="272.5" y1="167.8594" y2="167.8594"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="4" x="60.5" y="147.6606"> </text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="147" x="60.5" y="162.7935">1.Get today's schedule</text><polygon fill="#181818" points="516.5,192.9922,526.5,196.9922,516.5,200.9922,520.5,196.9922" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="288.5" x2="522.5" y1="196.9922" y2="196.9922"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="216" x="295.5" y="191.9263">2. Query Administration Requests</text><polygon fill="#181818" points="64.5,222.125,54.5,226.125,64.5,230.125,60.5,226.125" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="58.5" x2="277.5" y1="226.125" y2="226.125"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="93" x="70.5" y="221.0591">3.Notify (alert)</text><polygon fill="#181818" points="266.5,266.3906,276.5,270.3906,266.5,274.3906,270.5,270.3906" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="48.5" x2="272.5" y1="270.3906" y2="270.3906"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="4" x="55.5" y="250.1919"> </text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="94" x="55.5" y="265.3247">4. Read orders</text><line style="stroke:#181818;stroke-width:1.0;" x1="48.5" x2="95.5" y1="337.6563" y2="337.6563"/><line style="stroke:#181818;stroke-width:1.0;" x1="95.5" x2="95.5" y1="337.6563" y2="350.6563"/><line style="stroke:#181818;stroke-width:1.0;" x1="54.5" x2="95.5" y1="350.6563" y2="350.6563"/><polygon fill="#181818" points="64.5,346.6563,54.5,350.6563,64.5,354.6563,60.5,350.6563" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="4" x="60.5" y="317.4575"> </text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="172" x="60.5" y="332.5903">5. Ask if patient took meds</text><path d="M10,370.6563 L76,370.6563 L76,377.7891 L66,387.7891 L10,387.7891 L10,370.6563 " fill="#EEEEEE" style="stroke:#000000;stroke-width:1.5;"/><rect fill="none" height="61.3984" style="stroke:#000000;stroke-width:1.5;" width="341.5" x="10" y="370.6563"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="21" x="25" y="383.7231">alt</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="138" x="91" y="382.8667">[Patient took drugs]</text><polygon fill="#181818" points="266.5,420.0547,276.5,424.0547,266.5,428.0547,270.5,424.0547" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="53.5" x2="272.5" y1="424.0547" y2="424.0547"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="4" x="60.5" y="403.856"> </text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="154" x="64.5" y="418.9888">6a. Register Meds taken</text><path d="M10,446.0547 L76,446.0547 L76,453.1875 L66,463.1875 L10,463.1875 L10,446.0547 " fill="#EEEEEE" style="stroke:#000000;stroke-width:1.5;"/><rect fill="none" height="61.3984" style="stroke:#000000;stroke-width:1.5;" width="341.5" x="10" y="446.0547"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="21" x="25" y="459.1216">alt</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="213" x="91" y="458.2651">[No, patient did not take drugs]</text><polygon fill="#181818" points="266.5,495.4531,276.5,499.4531,266.5,503.4531,270.5,499.4531" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="53.5" x2="272.5" y1="499.4531" y2="499.4531"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="4" x="60.5" y="479.2544"> </text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="185" x="64.5" y="494.3872">6b. Register Meds NOT taken</text><path d="M30,521.4531 L96,521.4531 L96,528.5859 L86,538.5859 L30,538.5859 L30,521.4531 " fill="#EEEEEE" style="stroke:#000000;stroke-width:1.5;"/><rect fill="none" height="17.1328" style="stroke:#000000;stroke-width:1.5;" width="158" x="30" y="521.4531"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="21" x="45" y="534.52">alt</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="72" x="111" y="533.6636">[Not clear]</text><line style="stroke:#181818;stroke-width:1.0;" x1="53.5" x2="95.5" y1="594.7188" y2="594.7188"/><line style="stroke:#181818;stroke-width:1.0;" x1="95.5" x2="95.5" y1="594.7188" y2="607.7188"/><line style="stroke:#181818;stroke-width:1.0;" x1="54.5" x2="95.5" y1="607.7188" y2="607.7188"/><polygon fill="#181818" points="64.5,603.7188,54.5,607.7188,64.5,611.7188,60.5,607.7188" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="114" x="60.5" y="589.6528">7.Administer drug</text><polygon fill="#181818" points="266.5,632.8516,276.5,636.8516,266.5,640.8516,270.5,636.8516" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="53.5" x2="272.5" y1="636.8516" y2="636.8516"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="201" x="60.5" y="631.7856">8. Update administration report</text><polygon fill="#181818" points="635.5,661.9844,645.5,665.9844,635.5,669.9844,639.5,665.9844" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="288.5" x2="641.5" y1="665.9844" y2="665.9844"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="206" x="295.5" y="660.9185">9. Upload administration reports</text></g></svg></div>
  </text>

  <id value="example"/>
  <status value="draft"/>
  <purpose value="Purpose: this serves to enable remote performing of medication administration, by using remote / mobile devices to a) Get the planned medication administrations and b) Record the performing of these administrations without a permanent connection to the EHR."/>
  <!-- First define actors-->
  <actor>
    <key value="Nurse"/>
    <type value="person"/>
    <title value="Nurse"/>
    <description value="The Nurse"/>
  </actor>
  <actor>
    <key value="MAP"/>
    <type value="system"/>
    <title value="Nurse's Tablet"/>
    <description value="The entity that receives the Administration Requests to show the nurse to perform them"/>
  </actor>
  <actor>
    <key value="OP"/>
    <type value="system"/>
    <title value="MAR / Scheduler"/>
    <description value="The Medication Administration Order Placer"/>
  </actor>
  <actor>
    <key value="MAC"/>
    <type value="system"/>
    <title value="MAR / EHR"/>
    <description value="The entity that receives the Medication Administration reports"/>
  </actor>
  <!-- Then define the resource instances -->
  <instance>
    <key value="iherx001"/>
    <structureType>
      <system value="http://hl7.org/fhir/fhir-types"/>
      <code value="MedicationRequest"/>
    </structureType>
    <title value="Initial Prescription"/>
    <description value="The initial prescription which describes &quot;medication X, 3 times per day&quot; - the exact scheduling is not   in the initial prescription (it is left for the care teams to decide on the schedule)."/>
  </instance>
  <instance>
    <key value="iherx001.001"/>
    <structureType>
      <system value="http://hl7.org/fhir/fhir-types"/>
      <code value="MedicationRequest"/>
    </structureType>
    <title value="Request for day 1, morning"/>
    <description value="The administration request for day 1, morning"/>
  </instance>
  <instance>
    <key value="iherx001.002"/>
    <structureType>
      <system value="http://hl7.org/fhir/fhir-types"/>
      <code value="MedicationRequest"/>
    </structureType>
    <title value="Request for day 1, lunch"/>
    <description value="The administration request for day 1, lunch"/>
  </instance>
  <instance>
    <key value="iherx001.003"/>
    <structureType>
      <system value="http://hl7.org/fhir/fhir-types"/>
      <code value="MedicationRequest"/>
    </structureType>
    <title value="Request for day 1, evening"/>
    <description value="The administration request for day 1, evening"/>
  </instance>
  <instance>
    <key value="iherx001.004"/>
    <structureType>
      <system value="http://hl7.org/fhir/fhir-types"/>
      <code value="MedicationRequest"/>
    </structureType>
    <title value="Request for day 2, morning"/>
    <description value="The administration request for day 2, morning"/>
  </instance>
  <instance>
    <key value="iherx001.005"/>
    <structureType>
      <system value="http://hl7.org/fhir/fhir-types"/>
      <code value="MedicationRequest"/>
    </structureType>
    <title value="Request for day 2, lunch"/>
    <description value="The administration request for day 2, lunch"/>
  </instance>
  <instance>
    <key value="iherx001.006"/>
    <structureType>
      <system value="http://hl7.org/fhir/fhir-types"/>
      <code value="MedicationRequest"/>
    </structureType>
    <title value="Request for day 2, evening"/>
    <description value="The administration request for day 2, evening"/>
  </instance>
  <instance>
    <key value="iheadm001a"/>
    <structureType>
      <system value="http://hl7.org/fhir/fhir-types"/>
      <code value="MedicationAdministration"/>
    </structureType>
    <title value="Morning meds - taken"/>
    <description value="Administration report for day 1, morning: Taken"/>
  </instance>
  <instance>
    <key value="iheadm001b"/>
    <structureType>
      <system value="http://hl7.org/fhir/fhir-types"/>
      <code value="MedicationAdministration"/>
    </structureType>
    <title value="Morning meds - not taken"/>
    <description value="Administration report for day 1, morning: NOT Taken"/>
  </instance>
  <instance>
    <key value="iherx001bundle"/>
    <structureType>
      <system value="http://hl7.org/fhir/fhir-types"/>
      <code value="MedicationRequest"/>
    </structureType>
    <title value="Bundle of Medication Requests"/>
    <description value="All the medication Requests for Day 1"/>
    <containedInstance>
      <instanceReference value="iherx001.001"/>
    </containedInstance>
    <containedInstance>
      <instanceReference value="iherx001.002"/>
    </containedInstance>
    <containedInstance>
      <instanceReference value="iherx001.003"/>
    </containedInstance>
    <containedInstance>
      <instanceReference value="iherx001.004"/>
    </containedInstance>
    <containedInstance>
      <instanceReference value="iherx001.005"/>
    </containedInstance>
    <containedInstance>
      <instanceReference value="iherx001.006"/>
    </containedInstance>
  </instance>
  <instance>
    <key value="iheadm002"/>
    <structureType>
      <system value="http://hl7.org/fhir/fhir-types"/>
      <code value="MedicationAdministration"/>
    </structureType>
    <title value="Lunch meds - taken"/>
    <description value="Administration report for day 1, lunch: Taken"/>
    <version>
      <key value="iheadm002v1"/>
      <description value="Medication just taken"/>
    </version>
    <version>
      <key value="iheadm002v2"/>
      <description value="Medication rejected"/>
    </version>
  </instance>
  <!-- QUESTION: How to define search actions?-->
  <instance>
    <key value="iherxqry"/>
    <structureType>
      <system value="http://hl7.org/fhir/fhir-types"/>
      <code value="SearchParameter"/>
    </structureType>
    <title value="Search query1"/>
    <description value="The search administration request for day 1, morning"/>
  </instance>
  <process>
    <title value="Mobile Medication Administration"/>
    <description value="This scenario demonstrates the process of getting the relevant medication instructions for a patient visit and reporting the results of administration. The scenario is as follows: After the prescription is issued, the institution schedules each individual administration event in the Medication Administration Record (MAR). When preparing for a visit, the nurse queries the MAR for the scheduled administrations, obtaining a bundle of records. The nurse then performs the care activities and registers the results in the device. Upon synchronization of the device and the institution, the results of administration are uploaded to the EHR, thus updating the MAR."/>
    <preConditions value="Medication administration requests are in the EHR / MAR, scheduled for each individual intake."/>
    <postConditions value="Medication administration Reports are submitted, EHR is updated."/>
    <step>
      <number value="1"/>
      <operation>
        <title value="Get today's schedule"/>
        <initiator value="Nurse"/>
        <receiver value="MAP"/>
      </operation>
    </step>
    <step>
      <number value="2"/>
      <operation>
        <title value="Query Administration Requests"/>
        <initiator value="MAP"/>
        <receiver value="OP"/>
        <description value="Query for medication administration orders,\n- For today's shifts\n- For today's patients"/>
        <request>
          <instanceReference value="iherxqry"/>
        </request>
        <response>
          <instanceReference value="iherx001bundle"/>
        </response>
      </operation>
      <pause value="true"/>
    </step>
    <step>
      <number value="3"/>
      <operation>
        <title value="Notify (alert)"/>
        <initiator value="MAP"/>
        <receiver value="Nurse"/>
      </operation>
    </step>
    <step>
      <number value="4"/>
      <operation>
        <title value="Read orders"/>
        <initiator value="Nurse"/>
        <receiver value="MAP"/>
      </operation>
      <pause value="true"/>
    </step>
    <step>
      <number value="5"/>
      <operation>
        <title value="Ask if patient took meds"/>
        <initiator value="Nurse"/>
        <receiver value="Nurse"/>
      </operation>
    </step>
    <step>
      <alternative>
        <title value="Patient took drugs"/>
        <description value="Invoke if patient took medications"/>
        <step>
          <number value="6a"/>
          <operation>
            <title value="Register Meds taken"/>
            <initiator value="Nurse"/>
            <receiver value="MAP"/>
            <initiatorActive value="true"/>
          </operation>
        </step>
      </alternative>
      <alternative>
        <title value="No drugs"/>
        <description value="No, patient did not take drugs"/>
        <step>
          <number value="6b"/>
          <operation>
            <title value="Register Meds NOT taken"/>
            <initiator value="Nurse"/>
            <receiver value="MAP"/>
            <initiatorActive value="true"/>
          </operation>
        </step>
      </alternative>
      <alternative>
        <title value="Not clear"/>
        <description value="Unknown whether patient took medications or not"/>
      </alternative>
      <pause value="true"/>
    </step>
    <step>
      <number value="7"/>
      <operation>
        <title value="Administer drug"/>
        <initiator value="Nurse"/>
        <receiver value="Nurse"/>
      </operation>
    </step>
    <step>
      <number value="8"/>
      <operation>
        <title value="Register administration"/>
        <initiator value="Nurse"/>
        <receiver value="MAP"/>
        <initiatorActive value="true"/>
      </operation>
      <pause value="true"/>
    </step>
    <step>
      <number value="9"/>
      <operation>
        <title value="Nurse updates administration report"/>
        <initiator value="Nurse"/>
        <receiver value="MAP"/>
        <initiatorActive value="true"/>
        <request>
          <instanceReference value="iheadm002"/>
          <versionReference value="iheadm002v1"/>
        </request>
      </operation>
      <pause value="true"/>
    </step>
    <step>
      <number value="10"/>
      <operation>
        <title value="Upload administration reports"/>
        <initiator value="MAP"/>
        <receiver value="MAC"/>
        <description value="The nurse's system uploads the administration results to the server"/>
        <request>
          <instanceReference value="iheadm001a"/>
        </request>
      </operation>
    </step>
  </process>
</ExampleScenario>
