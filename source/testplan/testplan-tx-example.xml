<?xml version="1.0" encoding="UTF-8"?>
<TestPlan xmlns="http://hl7.org/fhir">
  <id value="tx-example"/>
  <url value="http://hl7.org/fhir/TestPlan/testplan-tx-example"/>
  <status value="draft"/>
  <publisher value="HL7 International / FHIR Infrastructure"/>
  <description value="This is a subset of the full [terminology ecosystem tests](https://github.com/HL7/fhir-tx-ecosystem-ig/tree/main/tests)"/>
  <scope>
    <reference value="http://hl7.org/fhir/uv/tx-ecosystem/ImplementationGuide/hl7.fhir.uv.tx-ecosystem"/>
  </scope>
  <runner value="https://github.com/hapifhir/org.hl7.fhir.core/blob/master/documentation/tx-runner.md"/>
  <mode>
    <code value="general"/>
    <description value="The tests a general purpose terminology server has to pass, but not codesystem specific terminology servers"/>
  </mode>
  <mode>
    <code value="tx.fhir.org"/>
    <description value="Tests that are only applicable for tx.fhir.org. Generally these are internal QA tests that haven't been made interopable (and don't need to be)"/>
  </mode>
  <suite>
    <name value="metadata"/>
    <description value="These tests apply to all servers"/>
    <test>
      <name value="metadata"/>
      <description value="Check that the minimum expected things are found in the server CapabilityStatement"/>
      <operation value="metadata"/>
      <expected>
        <name value="response"/>
        <file value="capstmt.json"/>
      </expected>
    </test>
  </suite>
  <suite>
    <name value="simple-cases"/>
    <description value="basic tests, setting up for the more complex API tests to come"/>
    <mode value="general"/>
    <input>
      <file value="simple/codesystem-simple.json"/>
    </input>
    <input>
      <file value="simple/valueset-all.json"/>
    </input>
    <test>
      <name value="simple-expand-all"/>
      <description value="Expansion containing all the code system"/>
      <operation value="expand"/>
      <input>
        <name value="request"/>
        <file value="simple/simple-expand-all-request-parameters.json"/>
      </input>
      <expected>
        <name value="response"/>
        <file value="simple/simple-expand-all-response-valueSet.json"/>
      </expected>
    </test>
    <test>
      <name value="simple-expand-isa-o2"/>
      <description value="Expansion containing a filter on the code system using is-a relationship with paging (tx.fhir.org internal test)"/>
      <operation value="expand"/>
      <mode value="tx.fhir.org"/>
      <input>
        <name value="request"/>
        <file value="simple/simple-expand-isa-o2-request-parameters.json"/>
      </input>
      <expected>
        <name value="response"/>
        <file value="simple/simple-expand-isa-o2-response-valueSet.json"/>
      </expected>
    </test>
  </suite>
</TestPlan>


