<?xml version="1.0" encoding="UTF-8"?>

<EventDefinition xmlns="http://hl7.org/fhir">
  <id value="example"/>
  <extension url="http://hl7.org/fhir/StructureDefinition/structuredefinition-standards-status">
    <valueCode value="informative"/>
  </extension>
  <extension url="http://hl7.org/fhir/StructureDefinition/structuredefinition-fmm">
    <valueInteger value="6"/>
  </extension>
  <extension url="http://hl7.org/fhir/StructureDefinition/structuredefinition-wg">
    <valueCode value="cds"/>
  </extension>
  <url value="http://hl7.org/fhir/EventDefinition/example"/>
  <name value="EventDefinitionExample"/>
  <title value="EventDefinition Example"/>
  <status value="draft"/>
  <experimental value="true"/>
  <description value="Example of an EventDefinition for monitoring emergency department admissions."/>
  <purpose value="Monitor all admissions to Emergency"/>
  <trigger>
    <type value="data-changed"/>
    <name value="monitor-emergency-admissions"/>
    <data>
      <type value="Encounter"/>
    </data>
    <condition>
      <description value="Encounter Location = emergency (active/completed encounters, current or previous)"/>
      <language value="text/fhirpath"/>
      <expression value="(%current | %previous).location.where(location = 'Location/emergency' and status in {'active', 'completed'}).exists()"/>
    </condition>
  </trigger>
</EventDefinition>