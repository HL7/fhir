<?xml version="1.0" encoding="UTF-8"?>

<StructureDefinition xmlns="http://hl7.org/fhir">
  <id value="ImagingStudy"/>
  <meta>
    <lastUpdated value="2021-01-02T08:58:31.578+11:00"/>
  </meta>
  <extension url="http://hl7.org/fhir/StructureDefinition/structuredefinition-category">
    <valueString value="Clinical.Diagnostics"/>
  </extension>
  <extension url="http://hl7.org/fhir/StructureDefinition/structuredefinition-standards-status">
    <valueCode value="normative"/>
  </extension>
  <extension url="http://hl7.org/fhir/StructureDefinition/structuredefinition-normative-version">
    <valueCode value="6.0.0"/>
  </extension>
  <extension url="http://hl7.org/fhir/StructureDefinition/structuredefinition-fmm">
    <valueInteger value="6"/>
  </extension>
  <extension url="http://hl7.org/fhir/StructureDefinition/structuredefinition-security-category">
    <valueCode value="patient"/>
  </extension>
  <extension url="http://hl7.org/fhir/StructureDefinition/structuredefinition-wg">
    <valueCode value="ii"/>
  </extension>
  <extension url="http://hl7.org/fhir/build/StructureDefinition/entered-in-error-status">
    <valueCode value=".status = entered-in-error"/>
  </extension>
  <url value="http://hl7.org/fhir/StructureDefinition/ImagingStudy"/>
  <identifier>
    <system value="urn:ietf:rfc:3986"/>
    <value value="urn:oid:2.16.840.1.113883.4.642.5.1089"/>
  </identifier>
  <version value="6.0.0"/>
  <name value="ImagingStudy"/>
  <title value="Imaging Study"/>
  <status value="active"/>
  <date value="2021-01-02T08:58:31+11:00"/>
  <publisher value="HL7 International / Imaging Integration"/>
  <contact>
    <telecom>
      <system value="url"/>
      <value value="http://hl7.org/fhir"/>
    </telecom>
  </contact>
  <contact>
    <telecom>
      <system value="url"/>
      <value value="http://www.hl7.org/Special/committees/imagemgt/index.cfm"/>
    </telecom>
  </contact>
  <description value="Representation of the content produced in a DICOM imaging study. A study comprises a set of series, each of which includes a set of images or other data objects (called Service-Object Pair Instances or SOP Instances) acquired or produced in a common context."/>
  <fhirVersion value="6.0.0"/>
  <mapping>
    <identity value="workflow"/>
    <uri value="http://hl7.org/fhir/workflow"/>
    <name value="Workflow Pattern"/>
  </mapping>
  <mapping>
    <identity value="rim"/>
    <uri value="http://hl7.org/v3"/>
    <name value="RIM Mapping"/>
  </mapping>
  <mapping>
    <identity value="dicom"/>
    <uri value="https://dicomstandard.org/current"/>
    <name value="DICOM Tag Mapping"/>
  </mapping>
  <mapping>
    <identity value="w5"/>
    <uri value="http://hl7.org/fhir/fivews"/>
    <name value="FiveWs Pattern Mapping"/>
  </mapping>
  <mapping>
    <identity value="v2"/>
    <uri value="http://hl7.org/v2"/>
    <name value="HL7 V2 Mapping"/>
  </mapping>
  <kind value="resource"/>
  <abstract value="false"/>
  <type value="ImagingStudy"/>
  <baseDefinition value="http://hl7.org/fhir/StructureDefinition/DomainResource"/>
  <derivation value="specialization"/>
  <differential>
    <element id="ImagingStudy">
      <path value="ImagingStudy"/>
      <short value="A set of images or image-related data produced in single study"/>
      <definition value="Representation of the content produced in a DICOM imaging study. A study comprises a set of series, each of which includes a set of Service-Object Pair Instances (SOP Instances - images or other data) acquired or produced in a common context.  A series is of only one modality (e.g. X-ray, CT, MR, ultrasound), but a study can have multiple series of different modality values."/>
      <min value="0"/>
      <max value="*"/>
      <constraint>
        <key value="ist-1"/>
        <severity value="error"/>
        <human value="series SHALL only be present if an identifier is present with a system of urn:dicom:uid"/>
        <expression value="series.exists() implies identifier.where(system = 'urn:dicom:uid').exists()"/>
      </constraint>
      <constraint>
        <key value="ist-2"/>
        <severity value="error"/>
        <human value="At most, a single identifier SHALL be present with a system of urn:dicom:uid"/>
        <expression value="identifier.where(system = 'urn:dicom:uid').count() &lt; 2"/>
      </constraint>
      <constraint>
        <key value="ist-3"/>
        <severity value="error"/>
        <human value="If numberOfSeries  and series are both present, the numberOfSeries value SHALL match the number of series elements"/>
        <expression value="numberOfSeries.exists() and series.exists() implies numberOfSeries = series.count()"/>
      </constraint>
      <constraint>
        <key value="ist-4"/>
        <severity value="error"/>
        <human value="If numberOfInstances and series.instance are both present, the numberOfInstances value SHALL match the total number of series.instance elements"/>
        <expression value="numberOfInstances.exists() and series.exists() implies numberOfInstances = series.instance.count()"/>
      </constraint>
      <constraint>
        <key value="ist-5"/>
        <severity value="error"/>
        <human value="If numberOfInstances and series.numberOfInstances are both present, the numberOfInstances value SHALL be the sum of the series.numberOfInstance values."/>
        <expression value="numberOfInstances.exists() and series.numberOfInstances.exists() implies numberOfInstances = series.numberOfInstances.aggregate($total + $this.toInteger(), 0)"/>
      </constraint>
      <constraint>
        <key value="ist-6"/>
        <severity value="error"/>
        <human value="For each series element, if numberOfInstances and instance are both present, the numberOfInstances value SHALL match the number of instance elements"/>
        <expression value="series.where(numberOfInstances.empty() or instance.empty() or numberOfInstances = instance.count()).count() = series.count()"/>
      </constraint>
      <constraint>
        <key value="ist-7"/>
        <severity value="error"/>
        <human value="If modality is present, modality SHALL equal all of the distinct values of series.modality"/>
        <expression value="modality.exists() implies modality.coding.select(system&amp;'|'&amp;code).trace('r').exclude(series.modality.coding.select(system&amp;'|'&amp;code).trace('c')).empty() and modality.text.exclude(series.modality.text).empty() and series.modality.coding.select(system&amp;'|'&amp;code).trace('r').exclude(modality.coding.select(system&amp;'|'&amp;code).trace('c')).empty() and series.modality.text.exclude(modality.text).empty()"/>
      </constraint>
      <mapping>
        <identity value="workflow"/>
        <map value="Event"/>
      </mapping>
      <mapping>
        <identity value="rim"/>
        <map value="Act[classCode=COMPOSITION, moodCode=EVN]"/>
      </mapping>
      <mapping>
        <identity value="dicom"/>
        <map value="DICOM Tag Mapping"/>
      </mapping>
      <mapping>
        <identity value="w5"/>
        <map value="clinical.diagnostics"/>
      </mapping>
    </element>
    <element id="ImagingStudy.identifier">
      <path value="ImagingStudy.identifier"/>
      <short value="Business identifier for imaging study"/>
      <definition value="Business identifiers assigned to this imaging study by the performer and/or other systems.  These identifiers remain constant as the resource is updated and propagates from server to server. Typically this will include the DICOM Study Instance UID."/>
      <comment value="Note: This is a business identifier, not a resource identifier (see [discussion](resource.html#identifiers)).  It is best practice for the identifier to only appear on a single resource instance, however business practices MAY occasionally dictate that multiple resource instances with the same identifier can exist - possibly even with different resource types.  For example, multiple Patient and a Person resource instance might share the same social insurance number, or an accession number MAY be used to relate a Task, an ImagingStudy and a DiagnosticReport.  See discussion under [Imaging Study Implementation Notes](imagingstudy.html#dicom-uids) for encoding of DICOM Study Instance UID."/>
      <requirements value="Allows identification of the imaging study as it is known by various participating systems and in a way that remains consistent across servers. ImagingStudy.identifier SHALL include exactly one Study Instance UID value if one or more series element values are present (see [DICOM PS 3.3 C.7.2](http://dicom.nema.org/medical/dicom/current/output/chtml/part03/sect_C.7.2.html).)"/>
      <alias value="StudyInstanceUID"/>
      <min value="0"/>
      <max value="*"/>
      <type>
        <code value="Identifier"/>
      </type>
      <condition value="ist-1"/>
      <condition value="ist-2"/>
      <isSummary value="true"/>
      <mapping>
        <identity value="workflow"/>
        <map value="Event.identifier"/>
      </mapping>
      <mapping>
        <identity value="w5"/>
        <map value="FiveWs.identifier"/>
      </mapping>
      <mapping>
        <identity value="rim"/>
        <map value=".id and .inboundRelationship[typeCode=COMP].source[classCode=ACSN, moodCode=EVN].id"/>
      </mapping>
      <mapping>
        <identity value="dicom"/>
        <map value="Study Instance UID (0020,000D) and / or Study ID (0020,0010)"/>
      </mapping>
    </element>
    <element id="ImagingStudy.status">
      <path value="ImagingStudy.status"/>
      <short value="registered | available | cancelled | entered-in-error | unknown | inactive"/>
      <definition value="The current state of the imaging study. This is distinct from the status of any service request or task associated with the imaging study."/>
      <comment value="Unknown does not represent &quot;other&quot; - one of the defined statuses must apply.  Unknown is used when the authoring system is not sure what the current status is."/>
      <min value="1"/>
      <max value="1"/>
      <type>
        <code value="code"/>
      </type>
      <isModifier value="true"/>
      <isModifierReason value="This element is labeled as a modifier because it is a status element that contains status entered-in-error which means that the resource SHOULD NOT be treated as valid"/>
      <isSummary value="true"/>
      <binding>
        <extension url="http://hl7.org/fhir/StructureDefinition/elementdefinition-bindingName">
          <valueString value="ImagingStudyStatus"/>
        </extension>
        <strength value="required"/>
        <description value="The status of the ImagingStudy."/>
        <valueSet value="http://hl7.org/fhir/ValueSet/imagingstudy-status"/>
      </binding>
      <mapping>
        <identity value="workflow"/>
        <map value="Event.status"/>
      </mapping>
      <mapping>
        <identity value="w5"/>
        <map value="FiveWs.status"/>
      </mapping>
      <mapping>
        <identity value="v2"/>
        <map value="Varies by domain"/>
      </mapping>
      <mapping>
        <identity value="rim"/>
        <map value=".status"/>
      </mapping>
    </element>
    <element id="ImagingStudy.modality">
      <path value="ImagingStudy.modality"/>
      <short value="The distinct values for series' modalities"/>
      <definition value="All the distinct values of series.modality. This MAY be either an acquisition or a non-acquisition modality."/>
      <alias value="ModalitiesInStudy"/>
      <min value="0"/>
      <max value="*"/>
      <type>
        <code value="CodeableConcept"/>
      </type>
      <condition value="ist-7"/>
      <isSummary value="true"/>
      <binding>
        <extension url="http://hl7.org/fhir/StructureDefinition/elementdefinition-bindingName">
          <valueString value="ImagingModality"/>
        </extension>
        <extension url="http://hl7.org/fhir/build/StructureDefinition/copyright">
          <valueString value="These codes are excerpted from Digital Imaging and Communications in Medicine (DICOM) Standard, Part 16: Content Mapping Resource, Copyright 2011 by the National Electrical Manufacturers Association"/>
        </extension>
        <strength value="extensible"/>
        <description value="Type of acquired data in the instance."/>
        <valueSet value="http://dicom.nema.org/medical/dicom/current/output/chtml/part16/sect_CID_33.html"/>
      </binding>
      <mapping>
        <identity value="w5"/>
        <map value="FiveWs.class"/>
      </mapping>
      <mapping>
        <identity value="rim"/>
        <map value=".code"/>
      </mapping>
      <mapping>
        <identity value="dicom"/>
        <map value="Modalities in Study (0008,0061) or Modality (0008,0060)"/>
      </mapping>
    </element>
    <element id="ImagingStudy.subject">
      <extension url="http://hl7.org/fhir/StructureDefinition/structuredefinition-display-hint">
        <valueString value="dicom=http://dicom.nema.org/medical/dicom/current/output/chtml/part03/sect_C.2.2.html"/>
      </extension>
      <extension url="http://hl7.org/fhir/build/StructureDefinition/hint">
        <valueString value="dicom=http://dicom.nema.org/medical/dicom/current/output/chtml/part03/sect_C.2.2.html"/>
      </extension>
      <path value="ImagingStudy.subject"/>
      <short value="Who or what is the subject of the study"/>
      <definition value="The subject, typically a patient, of the imaging study."/>
      <comment value="QA phantoms can be recorded with a Device; multiple subjects (such as mice) can be recorded with a Group."/>
      <min value="1"/>
      <max value="1"/>
      <type>
        <code value="Reference"/>
        <targetProfile value="http://hl7.org/fhir/StructureDefinition/Patient"/>
        <targetProfile value="http://hl7.org/fhir/StructureDefinition/Device"/>
        <targetProfile value="http://hl7.org/fhir/StructureDefinition/Group"/>
      </type>
      <isSummary value="true"/>
      <mapping>
        <identity value="workflow"/>
        <map value="Event.subject"/>
      </mapping>
      <mapping>
        <identity value="w5"/>
        <map value="FiveWs.subject[x]"/>
      </mapping>
      <mapping>
        <identity value="rim"/>
        <map value=".participation[typeCode=SBJ].role"/>
      </mapping>
      <mapping>
        <identity value="dicom"/>
        <map value="Patient ID (0010,0020) and Issuer of Patient ID (0010,0021) and / or Issuer of Patient ID Qualifiers Sequence (0010,0024) and / or Patient Name (0010,0010)"/>
      </mapping>
    </element>
    <element id="ImagingStudy.encounter">
      <path value="ImagingStudy.encounter"/>
      <short value="Encounter with which this imaging study is associated"/>
      <definition value="The healthcare event (e.g. a patient and healthcare provider interaction) during which the imaging data represented by this imaging study was acquired."/>
      <min value="0"/>
      <max value="1"/>
      <type>
        <code value="Reference"/>
        <targetProfile value="http://hl7.org/fhir/StructureDefinition/Encounter"/>
      </type>
      <isSummary value="true"/>
      <mapping>
        <identity value="workflow"/>
        <map value="Event.encounter"/>
      </mapping>
      <mapping>
        <identity value="w5"/>
        <map value="FiveWs.context"/>
      </mapping>
      <mapping>
        <identity value="rim"/>
        <map value="inboundRelationship[typeCode=COMP].source[classCode=ENC, moodCode=EVN]"/>
      </mapping>
    </element>
    <element id="ImagingStudy.started">
      <extension url="http://hl7.org/fhir/StructureDefinition/structuredefinition-display-hint">
        <valueString value="dicom=http://dicom.nema.org/medical/dicom/current/output/chtml/part03/sect_C.7.2.html#sect_C.7.2.1"/>
      </extension>
      <extension url="http://hl7.org/fhir/build/StructureDefinition/hint">
        <valueString value="dicom=http://dicom.nema.org/medical/dicom/current/output/chtml/part03/sect_C.7.2.html#sect_C.7.2.1"/>
      </extension>
      <path value="ImagingStudy.started"/>
      <short value="When the study was started"/>
      <definition value="Date and time the study started."/>
      <alias value="StudyDate"/>
      <alias value="StudyTime"/>
      <min value="0"/>
      <max value="1"/>
      <type>
        <code value="dateTime"/>
      </type>
      <example>
        <label value="General"/>
        <valueDateTime value="2011-01-01T11:01:20+03:00"/>
      </example>
      <isSummary value="true"/>
      <mapping>
        <identity value="workflow"/>
        <map value="Event.occurrence[x]"/>
      </mapping>
      <mapping>
        <identity value="w5"/>
        <map value="FiveWs.init"/>
      </mapping>
      <mapping>
        <identity value="rim"/>
        <map value=".effectiveTime"/>
      </mapping>
      <mapping>
        <identity value="dicom"/>
        <map value="Study Date (0008,0020) and Study Time (0008,0030)"/>
      </mapping>
    </element>
    <element id="ImagingStudy.basedOn">
      <path value="ImagingStudy.basedOn"/>
      <short value="Fulfills plan or order"/>
      <definition value="A plan or order that is fulfilled in whole or in part by this imaging study."/>
      <comment value="One imaging study MAY be based on multiple ordered procedures, e.g. chest/abdomen/pelvis CT orders being fulfilled by a single imaging study."/>
      <requirements value="Allows tracing of authorization for the imaging study and tracking whether proposals/recommendations were acted upon. If the ImagingStudy is associated with an Accession Number, this field SHOULD include a reference to that value in the form: identifier.value = (Accession Number Value) identifier.type = ACSN. A reference value pointing to a ServiceRequest resource is allowed but is not required."/>
      <alias value="AccessionNumber"/>
      <min value="0"/>
      <max value="*"/>
      <type>
        <code value="Reference"/>
        <targetProfile value="http://hl7.org/fhir/StructureDefinition/CarePlan"/>
        <targetProfile value="http://hl7.org/fhir/StructureDefinition/ServiceRequest"/>
        <targetProfile value="http://hl7.org/fhir/StructureDefinition/Appointment"/>
        <targetProfile value="http://hl7.org/fhir/StructureDefinition/Task"/>
      </type>
      <isSummary value="true"/>
      <mapping>
        <identity value="workflow"/>
        <map value="Event.basedOn"/>
      </mapping>
      <mapping>
        <identity value="w5"/>
        <map value="FiveWs.cause"/>
      </mapping>
      <mapping>
        <identity value="rim"/>
        <map value=".outboundRelationship[typeCode=FLFS].target[classCode=DGIMG, moodCode=RQO]"/>
      </mapping>
      <mapping>
        <identity value="dicom"/>
        <map value="Accession Number (0080,0050) and Issuer of Accession Number Sequence (0080,0051) and / or Requested Procedure Code Sequence (0032,1064)"/>
      </mapping>
    </element>
    <element id="ImagingStudy.procedure">
      <path value="ImagingStudy.procedure"/>
      <short value="Imaging performed procedure(s)"/>
      <definition value="The performed procedure(s) during which the data associated with this imaging study was created."/>
      <comment value="To link an imaging study to an Encounter use `encounter`."/>
      <min value="0"/>
      <max value="*"/>
      <type>
        <code value="Reference"/>
        <targetProfile value="http://hl7.org/fhir/StructureDefinition/Procedure"/>
      </type>
      <isSummary value="true"/>
      <mapping>
        <identity value="workflow"/>
        <map value="Event.partOf"/>
      </mapping>
      <mapping>
        <identity value="v2"/>
        <map value="Varies by domain"/>
      </mapping>
      <mapping>
        <identity value="rim"/>
        <map value=".outboundRelationship[typeCode=FLFS].target"/>
      </mapping>
    </element>
    <element id="ImagingStudy.referrer">
      <path value="ImagingStudy.referrer"/>
      <short value="Referring physician"/>
      <definition value="The referring physician."/>
      <alias value="ReferringPhysiciansName"/>
      <min value="0"/>
      <max value="1"/>
      <type>
        <code value="Reference"/>
        <targetProfile value="http://hl7.org/fhir/StructureDefinition/Practitioner"/>
        <targetProfile value="http://hl7.org/fhir/StructureDefinition/PractitionerRole"/>
      </type>
      <isSummary value="true"/>
      <mapping>
        <identity value="w5"/>
        <map value="FiveWs.cause"/>
      </mapping>
      <mapping>
        <identity value="rim"/>
        <map value=".outboundRelationship[typeCode=FLFS].target[classCode=DGIMG, moodCode=RQO].participation[typeCode=AUT].role"/>
      </mapping>
      <mapping>
        <identity value="dicom"/>
        <map value="Referring Physician's Name (0008,0090) and Referring Physician Identification Sequence (0008,0096)"/>
      </mapping>
    </element>
    <element id="ImagingStudy.endpoint">
      <path value="ImagingStudy.endpoint"/>
      <short value="Study access endpoint"/>
      <definition value="The network service providing access (e.g., query, view, or retrieval) for the study. See implementation notes for information about using DICOM endpoints. A study-level endpoint applies to each series in the study, unless overridden by a series-level endpoint with the same Endpoint.connectionType."/>
      <comment value="Typical endpoint types include DICOM WADO-RS, which is used to retrieve DICOM instances in native or rendered (e.g., JPG, PNG), formats using a RESTful API; DICOM WADO-URI, which can similarly retrieve native or rendered instances, except using an HTTP query-based approach; DICOM QIDO-RS, which allows RESTful query for DICOM metadata without retrieving the actual instances. See [Imaging Study Implementation Notes on Endpoints](imagingstudy.html#endpoints)."/>
      <requirements value="Access methods for viewing or retrieving the study or the study's series or instances. The study-level baseLocation applies to each series in the study, unless overridden in series by a series-level baseLocation of the same type."/>
      <min value="0"/>
      <max value="*"/>
      <type>
        <code value="Reference"/>
        <targetProfile value="http://hl7.org/fhir/StructureDefinition/Endpoint"/>
      </type>
      <isSummary value="true"/>
      <mapping>
        <identity value="rim"/>
        <map value="Not supported"/>
      </mapping>
    </element>
    <element id="ImagingStudy.location">
      <path value="ImagingStudy.location"/>
      <short value="Where imaging study occurred"/>
      <definition value="The principal physical location where the imaging study was performed."/>
      <requirements value="Ties the event to where the records are likely kept and provides context around the event occurrence (e.g. if it occurred inside or outside a dedicated healthcare setting)."/>
      <min value="0"/>
      <max value="1"/>
      <type>
        <code value="Reference"/>
        <targetProfile value="http://hl7.org/fhir/StructureDefinition/Location"/>
      </type>
      <isSummary value="true"/>
      <mapping>
        <identity value="workflow"/>
        <map value="Event.location"/>
      </mapping>
      <mapping>
        <identity value="w5"/>
        <map value="FiveWs.where[x]"/>
      </mapping>
      <mapping>
        <identity value="v2"/>
        <map value="EVN-7"/>
      </mapping>
      <mapping>
        <identity value="rim"/>
        <map value=".participation[typeCode=LOC].role"/>
      </mapping>
      <mapping>
        <identity value="dicom"/>
        <map value="Institutional Department Name (0008,1040) and Institutional Department Type Code Sequence (0008,1041)"/>
      </mapping>
    </element>
    <element id="ImagingStudy.reason">
      <path value="ImagingStudy.reason"/>
      <short value="	Why was imaging study performed?"/>
      <definition value="Describes why the imaging study occurred in coded or textual form or indicates another resource whose existence justifies this imaging study."/>
      <comment value="This MAY correspond to the indications or reasons encoded in an associated service request."/>
      <min value="0"/>
      <max value="*"/>
      <type>
        <code value="CodeableReference"/>
        <targetProfile value="http://hl7.org/fhir/StructureDefinition/Condition"/>
        <targetProfile value="http://hl7.org/fhir/StructureDefinition/Observation"/>
        <targetProfile value="http://hl7.org/fhir/StructureDefinition/DiagnosticReport"/>
        <targetProfile value="http://hl7.org/fhir/StructureDefinition/DocumentReference"/>
      </type>
      <isSummary value="true"/>
      <binding>
        <extension url="http://hl7.org/fhir/StructureDefinition/elementdefinition-bindingName">
          <valueString value="ImagingReason"/>
        </extension>
        <strength value="example"/>
        <description value="The reason for the study."/>
        <valueSet value="http://hl7.org/fhir/ValueSet/procedure-reason"/>
      </binding>
      <mapping>
        <identity value="workflow"/>
        <map value="Event.reason"/>
      </mapping>
      <mapping>
        <identity value="w5"/>
        <map value="FiveWs.why[x]"/>
      </mapping>
      <mapping>
        <identity value="rim"/>
        <map value=".reasonCode"/>
      </mapping>
      <mapping>
        <identity value="dicom"/>
        <map value="Reason for Requested Procedure Code Sequence (0040,1002)"/>
      </mapping>
    </element>
    <element id="ImagingStudy.note">
      <path value="ImagingStudy.note"/>
      <short value="Comments made about the imaging study"/>
      <definition value="Comments made about the imaging study by the performer, subject or other participants."/>
      <min value="0"/>
      <max value="*"/>
      <type>
        <code value="Annotation"/>
      </type>
      <isSummary value="true"/>
      <mapping>
        <identity value="workflow"/>
        <map value="Event.note"/>
      </mapping>
    </element>
    <element id="ImagingStudy.description">
      <path value="ImagingStudy.description"/>
      <short value="Study Description or Classification"/>
      <definition value="Description or classification of the imaging study."/>
      <alias value="StudyDescription"/>
      <min value="0"/>
      <max value="1"/>
      <type>
        <code value="string"/>
      </type>
      <isSummary value="true"/>
      <mapping>
        <identity value="rim"/>
        <map value=".text"/>
      </mapping>
      <mapping>
        <identity value="dicom"/>
        <map value="Study Description (0008,1030)"/>
      </mapping>
    </element>
    <element id="ImagingStudy.numberOfSeries">
      <path value="ImagingStudy.numberOfSeries"/>
      <short value="Number of Study Related Series"/>
      <definition value="Number of known Series in the Study. This value might be present even if the ImagingStudy.series element is empty or only partially populated."/>
      <alias value="NumberOfStudyRelatedSeries"/>
      <min value="0"/>
      <max value="1"/>
      <type>
        <code value="unsignedInt"/>
      </type>
      <condition value="ist-3"/>
      <isSummary value="true"/>
      <mapping>
        <identity value="rim"/>
        <map value=".outboundRelationship[typeCode=COMP, subsetCode=SUMM].target[classCode=OBSSER, moodCode=EVN].repeatNumber"/>
      </mapping>
      <mapping>
        <identity value="dicom"/>
        <map value="Number of Study Related Series (0020,1206). Note: this attribute is not included in DICOM instance metadata but is returned as a result of a query."/>
      </mapping>
    </element>
    <element id="ImagingStudy.numberOfInstances">
      <path value="ImagingStudy.numberOfInstances"/>
      <short value="Number of Study Related Instances"/>
      <definition value="Number of known SOP Instances in Study. This value might be present even if the ImagingStudy.series.instance elements are empty or only partially populated."/>
      <alias value="NumberOfStudyRelatedInstances"/>
      <min value="0"/>
      <max value="1"/>
      <type>
        <code value="unsignedInt"/>
      </type>
      <condition value="ist-4"/>
      <condition value="ist-5"/>
      <isSummary value="true"/>
      <mapping>
        <identity value="rim"/>
        <map value=".outboundRelationship[typeCode=COMP, subsetCode=SUMM].target[classCode=DGIMG, moodCode=EVN].repeatNumber"/>
      </mapping>
      <mapping>
        <identity value="dicom"/>
        <map value="Number of Study Related Instances (0020,1208). Note: this attribute is not included in DICOM instance metadata but is returned as a result of a query."/>
      </mapping>
    </element>
    <element id="ImagingStudy.series">
      <extension url="http://hl7.org/fhir/build/StructureDefinition/uml-dir">
        <valueCode value="right"/>
      </extension>
      <path value="ImagingStudy.series"/>
      <short value="The set of Series belonging to the study"/>
      <definition value="The set of Series belonging to the study. Each Series contains a set of SOP Instances, which could be images, waveforms, or other content."/>
      <min value="0"/>
      <max value="*"/>
      <type>
        <code value="BackboneElement"/>
      </type>
      <condition value="ist-1"/>
      <condition value="ist-3"/>
      <condition value="ist-4"/>
      <condition value="ist-5"/>
      <condition value="ist-6"/>
      <condition value="ist-7"/>
      <isSummary value="true"/>
      <mapping>
        <identity value="rim"/>
        <map value=".outboundRelationship[typeCode=COMP].target[classCode=OBSSER, moodCode=EVN]"/>
      </mapping>
    </element>
    <element id="ImagingStudy.series.uid">
      <path value="ImagingStudy.series.uid"/>
      <short value="DICOM Series Instance UID"/>
      <definition value="The DICOM Series Instance UID of the series."/>
      <comment value="See [DICOM PS3.3 C.7.3](http://dicom.nema.org/medical/dicom/current/output/chtml/part03/sect_C.7.3.html)."/>
      <requirements value="DICOM Series Instance UID."/>
      <alias value="SeriesInstanceUID"/>
      <min value="1"/>
      <max value="1"/>
      <type>
        <code value="id"/>
      </type>
      <example>
        <label value="General"/>
        <valueId value="2.16.124.113543.6003.2588828330.45298.17418.2723805630"/>
      </example>
      <isSummary value="true"/>
      <mapping>
        <identity value="rim"/>
        <map value=".id"/>
      </mapping>
      <mapping>
        <identity value="dicom"/>
        <map value="Series Instance UID (0020,000E)"/>
      </mapping>
    </element>
    <element id="ImagingStudy.series.number">
      <path value="ImagingStudy.series.number"/>
      <short value="Numeric identifier of this series"/>
      <definition value="The numeric identifier of this series in the study."/>
      <alias value="SeriesNumber"/>
      <min value="0"/>
      <max value="1"/>
      <type>
        <code value="unsignedInt"/>
      </type>
      <example>
        <label value="General"/>
        <valueUnsignedInt value="3"/>
      </example>
      <isSummary value="true"/>
      <mapping>
        <identity value="rim"/>
        <map value=".inboundRelationship[type=COMP, source[classCode=COMPOSITION, moodCode=EVN]].sequenceNumber"/>
      </mapping>
      <mapping>
        <identity value="dicom"/>
        <map value="Series Number (0020,0011)"/>
      </mapping>
    </element>
    <element id="ImagingStudy.series.modality">
      <path value="ImagingStudy.series.modality"/>
      <short value="The modality used for this series"/>
      <definition value="The distinct modality for this series. This MAY be either an acquisition modality (e.g., CT, MR) or a non-acquisition modality (e.g., segmentation, presentation state)."/>
      <alias value="Modality"/>
      <min value="1"/>
      <max value="1"/>
      <type>
        <code value="CodeableConcept"/>
      </type>
      <condition value="ist-7"/>
      <isSummary value="true"/>
      <binding>
        <extension url="http://hl7.org/fhir/StructureDefinition/elementdefinition-bindingName">
          <valueString value="ImagingModality"/>
        </extension>
        <extension url="http://hl7.org/fhir/build/StructureDefinition/copyright">
          <valueString value="These codes are excerpted from Digital Imaging and Communications in Medicine (DICOM) Standard, Part 16: Content Mapping Resource, Copyright 2011 by the National Electrical Manufacturers Association"/>
        </extension>
        <strength value="extensible"/>
        <description value="Type of acquired data in the instance."/>
        <valueSet value="http://dicom.nema.org/medical/dicom/current/output/chtml/part16/sect_CID_33.html"/>
      </binding>
      <mapping>
        <identity value="rim"/>
        <map value=".code"/>
      </mapping>
      <mapping>
        <identity value="dicom"/>
        <map value="Modality (0008,0060)"/>
      </mapping>
    </element>
    <element id="ImagingStudy.series.description">
      <path value="ImagingStudy.series.description"/>
      <short value="Series Description or Classification"/>
      <definition value="Description or classification of the series."/>
      <alias value="SeriesDescription"/>
      <min value="0"/>
      <max value="1"/>
      <type>
        <code value="string"/>
      </type>
      <example>
        <label value="General"/>
        <valueString value="CT Surview 180"/>
      </example>
      <isSummary value="true"/>
      <mapping>
        <identity value="rim"/>
        <map value=".text"/>
      </mapping>
      <mapping>
        <identity value="dicom"/>
        <map value="Series Description (0008,103E)"/>
      </mapping>
    </element>
    <element id="ImagingStudy.series.numberOfInstances">
      <path value="ImagingStudy.series.numberOfInstances"/>
      <short value="Number of Series Related Instances"/>
      <definition value="Number of SOP Instances in the Series. The value given MAY be larger than the number of instance elements this series contains due to resource availability, security, or other factors. This element SHOULD be present if any instance elements are present."/>
      <alias value="NumberOfSeriesRelatedInstances"/>
      <min value="0"/>
      <max value="1"/>
      <type>
        <code value="unsignedInt"/>
      </type>
      <condition value="ist-5"/>
      <condition value="ist-6"/>
      <isSummary value="true"/>
      <mapping>
        <identity value="rim"/>
        <map value=".outboundRelationship[typeCode=COMP, subsetCode=SUMM].target[classCode=DGIMG, moodCode=EVN].repeatNumber"/>
      </mapping>
      <mapping>
        <identity value="dicom"/>
        <map value="Number of Series Related Instances (0020,1209). Note: this attribute is not included in DICOM instance metadata but is returned as a result of a query."/>
      </mapping>
    </element>
    <element id="ImagingStudy.series.endpoint">
      <path value="ImagingStudy.series.endpoint"/>
      <short value="Series access endpoint"/>
      <definition value="The network service providing access for the study. See implementation notes for information about [using DICOM endpoints](imagingstudy.html#endpoints)."/>
      <min value="0"/>
      <max value="*"/>
      <type>
        <code value="Reference"/>
        <targetProfile value="http://hl7.org/fhir/StructureDefinition/Endpoint"/>
      </type>
      <isSummary value="true"/>
      <mapping>
        <identity value="rim"/>
        <map value="Not supported"/>
      </mapping>
    </element>
    <element id="ImagingStudy.series.bodySite">
      <path value="ImagingStudy.series.bodySite"/>
      <short value="Body part examined"/>
      <definition value="The anatomic structures examined. See [DICOM Part 16 Annex L](http://dicom.nema.org/medical/dicom/current/output/chtml/part16/chapter_L.html) for DICOM to SNOMED-CT mappings. The bodySite MAY include the laterality of body part imaged."/>
      <alias value="BodyPartExamined"/>
      <min value="0"/>
      <max value="1"/>
      <type>
        <code value="CodeableReference"/>
        <targetProfile value="http://hl7.org/fhir/StructureDefinition/BodyStructure"/>
      </type>
      <isSummary value="true"/>
      <binding>
        <extension url="http://hl7.org/fhir/StructureDefinition/elementdefinition-bindingName">
          <valueString value="BodySite"/>
        </extension>
        <extension url="http://hl7.org/fhir/tools/StructureDefinition/binding-definition">
          <valueString value="Codes describing anatomical locations. MAY include laterality."/>
        </extension>
        <strength value="example"/>
        <description value="SNOMED CT Body site concepts"/>
        <valueSet value="http://hl7.org/fhir/ValueSet/body-site"/>
      </binding>
      <mapping>
        <identity value="rim"/>
        <map value=".targetSiteCode"/>
      </mapping>
      <mapping>
        <identity value="dicom"/>
        <map value="Body Part Examined (0018,0015) or Anatomic Region Sequence (0008,2218) and Laterality (0020,0060)"/>
      </mapping>
    </element>
    <element id="ImagingStudy.series.specimen">
      <path value="ImagingStudy.series.specimen"/>
      <short value="Specimen imaged"/>
      <definition value="The specimen imaged, e.g., for whole slide imaging of a biopsy."/>
      <min value="0"/>
      <max value="*"/>
      <type>
        <code value="Reference"/>
        <targetProfile value="http://hl7.org/fhir/StructureDefinition/Specimen"/>
      </type>
      <isSummary value="true"/>
      <mapping>
        <identity value="rim"/>
        <map value="Role[classCode=SPEC]"/>
      </mapping>
      <mapping>
        <identity value="dicom"/>
        <map value="Specimen Identifier (0040,0551) or Specimen UID (0040,0554) and + Issuer of the Specimen Identifier Sequence (0040,0562)"/>
      </mapping>
    </element>
    <element id="ImagingStudy.series.started">
      <path value="ImagingStudy.series.started"/>
      <short value="When the series started"/>
      <definition value="The date and time the series was started."/>
      <min value="0"/>
      <max value="1"/>
      <type>
        <code value="dateTime"/>
      </type>
      <isSummary value="true"/>
      <mapping>
        <identity value="rim"/>
        <map value=".effectiveTime"/>
      </mapping>
      <mapping>
        <identity value="dicom"/>
        <map value="Series Date (0008,0021) + and Series Time (0008,0031)"/>
      </mapping>
    </element>
    <element id="ImagingStudy.series.performer">
      <extension url="http://hl7.org/fhir/build/StructureDefinition/uml-dir">
        <valueCode value="down"/>
      </extension>
      <path value="ImagingStudy.series.performer"/>
      <short value="Who performed the series"/>
      <definition value="Indicates who or what performed the series and how they were involved."/>
      <comment value="If the person who performed the series is not known, their Organization MAY be recorded. A patient, or related person, MAY be the performer, e.g. for patient-captured images."/>
      <requirements value="The performer is recorded at the series level, since each series in a study MAY be performed by a different performer, at different times, and using different devices. A series MAY be performed by multiple performers."/>
      <alias value="PerformingPhysicianName"/>
      <alias value="OperatorName"/>
      <alias value="ManufacturersModelName"/>
      <alias value="InstitutionName"/>
      <min value="0"/>
      <max value="*"/>
      <type>
        <code value="BackboneElement"/>
      </type>
      <isSummary value="true"/>
      <mapping>
        <identity value="workflow"/>
        <map value="Event.performer"/>
      </mapping>
      <mapping>
        <identity value="rim"/>
        <map value=".participation[typeCode=PRF].role"/>
      </mapping>
      <mapping>
        <identity value="dicom"/>
        <map value="One or more of: Performing Physician's Name (0008,1050) and Performing Physician Identification Sequence (0008,1052); Operators' Name (0008,1070) and Operator Identification Sequence (0008,1072); Manufacturer (0008,0070) and Manufacturer's Model Name (0008,1090); or Institution Name (0008,0080)"/>
      </mapping>
    </element>
    <element id="ImagingStudy.series.performer.function">
      <path value="ImagingStudy.series.performer.function"/>
      <short value="Type of performance"/>
      <definition value="Distinguishes the type of involvement of the performer in the imaging study.."/>
      <requirements value="Allows disambiguation of the types of involvement of different performers."/>
      <min value="0"/>
      <max value="1"/>
      <type>
        <code value="CodeableConcept"/>
      </type>
      <isSummary value="true"/>
      <binding>
        <extension url="http://hl7.org/fhir/StructureDefinition/elementdefinition-bindingName">
          <valueString value="EventPerformerFunction"/>
        </extension>
        <strength value="extensible"/>
        <description value="The type of involvement of the performer."/>
        <valueSet value="http://hl7.org/fhir/ValueSet/series-performer-function"/>
      </binding>
      <mapping>
        <identity value="workflow"/>
        <map value="Event.performer.function"/>
      </mapping>
      <mapping>
        <identity value="rim"/>
        <map value=".participation[typeCode=PRF].role"/>
      </mapping>
      <mapping>
        <identity value="dicom"/>
        <map value="PRF (Performing Physician's Name); SPRF (Operator's Name); DEV (Manufacturer / Manufacturer's Model Name); or LOC (Institution Name)"/>
      </mapping>
    </element>
    <element id="ImagingStudy.series.performer.actor">
      <path value="ImagingStudy.series.performer.actor"/>
      <short value="Who performed imaging study"/>
      <definition value="Indicates who or what performed the imaging study."/>
      <min value="1"/>
      <max value="1"/>
      <type>
        <code value="Reference"/>
        <targetProfile value="http://hl7.org/fhir/StructureDefinition/Practitioner"/>
        <targetProfile value="http://hl7.org/fhir/StructureDefinition/PractitionerRole"/>
        <targetProfile value="http://hl7.org/fhir/StructureDefinition/Organization"/>
        <targetProfile value="http://hl7.org/fhir/StructureDefinition/CareTeam"/>
        <targetProfile value="http://hl7.org/fhir/StructureDefinition/Patient"/>
        <targetProfile value="http://hl7.org/fhir/StructureDefinition/Device"/>
        <targetProfile value="http://hl7.org/fhir/StructureDefinition/RelatedPerson"/>
        <targetProfile value="http://hl7.org/fhir/StructureDefinition/HealthcareService"/>
      </type>
      <isSummary value="true"/>
      <mapping>
        <identity value="workflow"/>
        <map value="Event.performer.actor"/>
      </mapping>
      <mapping>
        <identity value="w5"/>
        <map value="FiveWs.actor"/>
      </mapping>
      <mapping>
        <identity value="v2"/>
        <map value="EVN-5 or by domain"/>
      </mapping>
      <mapping>
        <identity value="rim"/>
        <map value=".participation[typeCode=PRF].role[scoper.determinerCode=INSTANCE]"/>
      </mapping>
      <mapping>
        <identity value="dicom"/>
        <map value="Practitioner (Performing Physician's Name); Practitioner (Operator's Name); Device (Manufacturer / Manufacturer's Model Name); or Organization (Institution Name)" />
      </mapping>
    </element>
    <element id="ImagingStudy.series.instance">
      <extension url="http://hl7.org/fhir/build/StructureDefinition/uml-dir">
        <valueCode value="right"/>
      </extension>
      <path value="ImagingStudy.series.instance"/>
      <short value="A single SOP instance from the series"/>
      <definition value="A single SOP instance within the series, e.g. an image, or presentation state."/>
      <min value="0"/>
      <max value="*"/>
      <type>
        <code value="BackboneElement"/>
      </type>
      <condition value="ist-4"/>
      <condition value="ist-6"/>
      <mapping>
        <identity value="rim"/>
        <map value=".outboundRelationship[typeCode=COMP].target[classCode=DGIMG, moodCode=EVN]"/>
      </mapping>
    </element>
    <element id="ImagingStudy.series.instance.uid">
      <path value="ImagingStudy.series.instance.uid"/>
      <short value="DICOM SOP Instance UID"/>
      <definition value="The DICOM SOP Instance UID for this image or other DICOM content."/>
      <comment value="See  [DICOM PS3.3 C.12.1](http://dicom.nema.org/medical/dicom/current/output/chtml/part03/sect_C.12.html#sect_C.12.1)."/>
      <requirements value="DICOM SOP Instance UID."/>
      <alias value="SOPInstanceUID"/>
      <min value="1"/>
      <max value="1"/>
      <type>
        <code value="id"/>
      </type>
      <example>
        <label value="General"/>
        <valueId value="2.16.124.113543.6003.189642796.63084.16748.2599092903"/>
      </example>
      <mapping>
        <identity value="rim"/>
        <map value=".id"/>
      </mapping>
      <mapping>
        <identity value="dicom"/>
        <map value="SOP Instance UID (0008,0018)"/>
      </mapping>
    </element>
    <element id="ImagingStudy.series.instance.sopClass">
      <path value="ImagingStudy.series.instance.sopClass"/>
      <short value="DICOM class type"/>
      <definition value="DICOM instance  type."/>
      <comment value="Typically a well-known DICOM SOP Class UID but MAY be the UID of a private SOP Class"/>
      <alias value="SOPClassUID"/>
      <min value="1"/>
      <max value="1"/>
      <type>
        <code value="oid"/>
      </type>
      <mapping>
        <identity value="rim"/>
        <map value=".inboundRelationship[typeCode=COMP]. source[classCode=OBS, moodCode=EVN, code=&quot;sop class&quot;].value"/>
      </mapping>
      <mapping>
        <identity value="dicom"/>
        <map value="SOP Class UID (0008,0016)"/>
      </mapping>
    </element>
    <element id="ImagingStudy.series.instance.number">
      <path value="ImagingStudy.series.instance.number"/>
      <short value="The number of this instance in the series"/>
      <definition value="The number of the instance assigned by the creator of the series. MAY or MAY NOT correspond to intended display order."/>
      <alias value="InstanceNumber"/>
      <min value="0"/>
      <max value="1"/>
      <type>
        <code value="unsignedInt"/>
      </type>
      <example>
        <label value="General"/>
        <valueUnsignedInt value="1"/>
      </example>
      <mapping>
        <identity value="rim"/>
        <map value=".inboundRelationship[typeCode=COMP, source[classCode=OBSSER, moodCode=EVN]].sequenceNumber"/>
      </mapping>
      <mapping>
        <identity value="dicom"/>
        <map value="Instance Number (0020,0013)"/>
      </mapping>
    </element>
    <element id="ImagingStudy.series.instance.title">
      <path value="ImagingStudy.series.instance.title"/>
      <short value="Name or title of the instance"/>
      <definition value="The title of the instance."/>
      <comment value="Particularly for post-acquisition analytic objects, such as SR, presentation states, value mapping, etc."/>
      <min value="0"/>
      <max value="1"/>
      <type>
        <code value="string"/>
      </type>
      <mapping>
        <identity value="rim"/>
        <map value=".title"/>
      </mapping>
      <mapping>
        <identity value="dicom"/>
        <map value="Document Title (0042,0010)"/>
      </mapping>
    </element>
  </differential>
</StructureDefinition>
