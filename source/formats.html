<!DOCTYPE HTML>


      
[%settitle Formats%]
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
[%file newheader%]
</head>
<body>
[%file newnavbar%]

<div class="col-9">

<%fmtheader base%>

<a name="root"> </a>
<h1>Resource Formats</h1>
<p>
This page documents how the content of the resources are described. 
In actual exchange, resources can be represented in the following
formats: <a href="xml.html">XML</a> and <a href="json.html">JSON</a>. 
Other representations are allowed, but are not described by this specification.
</p>

<h2>Resource Definition</h2>
<p>
The resources are described in several different ways:
</p>
<ul>
 <li>a hierarchical table that presents a logical view of the content</li>
 <li>a UML diagram that summarizes the content graphically</li>
 <li>a pseudo-XML syntax that provides a visual sense of what the end resource instances will look like in XML</li>
 <li>a pseudo-JSON syntax that provides a visual sense of what the end resource instances will look like in JSON</li>
</ul> 
<p>
In addition to this descriptive syntax, other definitional forms are available, including W3C schema and Schematron, and the <a href="structuredefinition.html">StructureDefinition</a> syntax defined internally.
</p>

<a name="table"> </a>
<h3>Logical table</h3>
<p>
The Logical View shows the resources as a tree structure with the following columns:
</p>
<table class="lines">
 <tr> <td><b>Column</b></td> <td><b>Content</b></td> </tr>
 <tr> <td>Name</td> <td>The name of the element in the resource (manifests as XML element name, or JSON property name. Some names finish with "[x]" - the meaning of this is discussed below. In addition, this column contains an icon that denotes the underlying type of the content. The icons are described below</td> </tr>
 <tr> <td>Flags</td> <td>A set of information about the element that impacts how implementers handle them. The flags are described below</td> </tr>
 <tr> <td>Card.</td> <td>The lower and upper bounds on how many times this element is allowed to appear in the resource</td> </tr>
 <tr> <td>Type</td> <td>The type of the element (hyperlinked to the definition of the type)</td> </tr>
 <tr> <td>Description &amp; Constraints</td> <td>A description of the element, and details about constraints that are applied to it. Particularly, for coded elements, information about which codes can be used</td> </tr>
</table>
<p>
Here's an example:
</p>
<table style="border: 0px; font-size: 11px; font-family: verdana; vertical-align: top;" cellpadding="0" border="0" cellspacing="0"><tbody>
<tr style="border: 1px #F0F0F0 solid; font-size: 11px; font-family: verdana; vertical-align: top;">
  <th style="vertical-align: top; text-align : left; padding:0px 4px 0px 4px" class="heirarchy">Name</th>
  <th style="vertical-align: top; text-align : left; padding:0px 4px 0px 4px" class="heirarchy">Flags</th>
  <th style="vertical-align: top; text-align : left; padding:0px 4px 0px 4px" class="heirarchy">Card.</th>
  <th style="width: 100px" class="heirarchy">Type</th>
  <th style="vertical-align: top; text-align : left; padding:0px 4px 0px 4px" class="heirarchy">Description &amp; Constraints</th>
</tr>
<tr style="border: 0px; padding:0px; vertical-align: top; background-color: white;">
  <td style="vertical-align: top; text-align : left; padding:0px 4px 0px 4px; white-space: nowrap; background-image: url(tbl_bck1.png)" class="heirarchy"><img alt="." class="heirarchy" src="tbl_spacer.png"/><img title="Resource" style="background-color: white;" alt="." class="heirarchy" src="icon_resource.png"/> <a title="Definition" href="#">Resource Name</a></td>
  <td style="vertical-align: top; text-align : left; padding:0px 4px 0px 4px" class="heirarchy"></td>
  <td style="vertical-align: top; text-align : left; padding:0px 4px 0px 4px" class="heirarchy"></td>
  <td style="vertical-align: top; text-align : left; padding:0px 4px 0px 4px" class="heirarchy"><a href="resource.html">Base Type</a></td>
  <td style="vertical-align: top; text-align : left; padding:0px 4px 0px 4px" class="heirarchy">Definition</td>
</tr>
<tr style="border: 0px; padding:0px; vertical-align: top; background-color: white;">
 <td style="vertical-align: top; text-align : left; padding:0px 4px 0px 4px; white-space: nowrap; background-image: url(tbl_bck10.png)" class="heirarchy"><img alt="." class="heirarchy" src="tbl_spacer.png"/><img alt="." class="heirarchy" src="tbl_vjoin.png"/><img title="Data Type" style="background-color: white;" alt="." class="heirarchy" src="icon_datatype.gif"/> <a title="Definition" href="#">nameA</a></td>
 <td style="vertical-align: top; text-align : left; padding:0px 4px 0px 4px" class="heirarchy"><span title="This element is included in summaries">Σ</span></td>
 <td style="vertical-align: top; text-align : left; padding:0px 4px 0px 4px" class="heirarchy">1..1</td>
 <td style="vertical-align: top; text-align : left; padding:0px 4px 0px 4px" class="heirarchy"><a href="#">type</a></td>
 <td style="vertical-align: top; text-align : left; padding:0px 4px 0px 4px" class="heirarchy">description of content</td>
</tr>
<tr style="border: 0px; padding:0px; vertical-align: top; background-color: white;">
 <td style="vertical-align: top; text-align : left; padding:0px 4px 0px 4px; white-space: nowrap; background-image: url(tbl_bck11.png)" class="heirarchy"><img alt="." class="heirarchy" src="tbl_spacer.png"/><img alt="." class="heirarchy" src="tbl_vjoin.png"/><img title="Choice of Types" style="background-color: white;" alt="." class="heirarchy" src="icon_choice.gif"/> <a title="Description" href="#">nameB[x]</a></td>
 <td style="vertical-align: top; text-align : left; padding:0px 4px 0px 4px" class="heirarchy"><span title="This element is a modifier element">?! </span><span title="This element is included in summaries">Σ</span></td>
 <td style="vertical-align: top; text-align : left; padding:0px 4px 0px 4px" class="heirarchy">0..1</td>
 <td style="vertical-align: top; text-align : left; padding:0px 4px 0px 4px" class="heirarchy"></td>
 <td style="vertical-align: top; text-align : left; padding:0px 4px 0px 4px" class="heirarchy">description<br/><span title="1">SHALL at least have a value</span></td>
</tr>
<tr style="border: 0px; padding:0px; vertical-align: top; background-color: white;">
 <td style="vertical-align: top; text-align : left; padding:0px 4px 0px 4px; white-space: nowrap; background-image: url(tbl_bck110.png)" class="heirarchy"><img alt="." class="heirarchy" src="tbl_spacer.png"/><img alt="." class="heirarchy" src="tbl_vline.png"/><img alt="." class="heirarchy" src="tbl_vjoin.png"/><img title="Primitive Data Type" style="background-color: white;" alt="." class="heirarchy" src="icon_primitive.png"/> <span title="Value of &quot;true&quot; or &quot;false&quot;">nameBType1</span></td>
 <td style="vertical-align: top; text-align : left; padding:0px 4px 0px 4px" class="heirarchy"></td>
 <td style="vertical-align: top; text-align : left; padding:0px 4px 0px 4px" class="heirarchy">0..1</td>
 <td style="vertical-align: top; text-align : left; padding:0px 4px 0px 4px" class="heirarchy"><a href="#">type1</a></td>
 <td style="vertical-align: top; text-align : left; padding:0px 4px 0px 4px" class="heirarchy"></td>
</tr>
<tr style="border: 0px; padding:0px; vertical-align: top; background-color: white;">
 <td style="vertical-align: top; text-align : left; padding:0px 4px 0px 4px; white-space: nowrap; background-image: url(tbl_bck110.png)" class="heirarchy"><img alt="." class="heirarchy" src="tbl_spacer.png"/><img alt="." class="heirarchy" src="tbl_vline.png"/><img alt="." class="heirarchy" src="tbl_vjoin_end.png"/><img title="Primitive Data Type" style="background-color: white;" alt="." class="heirarchy" src="icon_primitive.png"/> <span title="Value of &quot;true&quot; or &quot;false&quot;">nameBType2</span></td>
 <td style="vertical-align: top; text-align : left; padding:0px 4px 0px 4px" class="heirarchy"><span title="This element has or is affected by some invariants">I</span></td>
 <td style="vertical-align: top; text-align : left; padding:0px 4px 0px 4px" class="heirarchy">0..1</td>
 <td style="vertical-align: top; text-align : left; padding:0px 4px 0px 4px" class="heirarchy"><a href="#">type2</a></td>
 <td style="vertical-align: top; text-align : left; padding:0px 4px 0px 4px" class="heirarchy"></td>
</tr>
<tr style="border: 0px; padding:0px; vertical-align: top; background-color: white;">
<td style="vertical-align: top; text-align : left; padding:0px 4px 0px 4px; white-space: nowrap; background-image: url(tbl_bck11.png)" class="heirarchy"><img alt="." class="heirarchy" src="tbl_spacer.png"/><img alt="." class="heirarchy" src="tbl_vjoin_end.png"/><img title="Element" style="background-color: white;" alt="." class="heirarchy" src="icon_element.gif"/> <a title="Definition" href="#">nameC</a></td>
<td style="vertical-align: top; text-align : left; padding:0px 4px 0px 4px" class="heirarchy"></td>
<td style="vertical-align: top; text-align : left; padding:0px 4px 0px 4px" class="heirarchy">1..*</td>
<td style="vertical-align: top; text-align : left; padding:0px 4px 0px 4px" class="heirarchy">Element</td>
<td style="vertical-align: top; text-align : left; padding:0px 4px 0px 4px" class="heirarchy">Definition</td>
</tr>
<tr style="border: 0px; padding:0px; vertical-align: top; background-color: white;">
<td style="vertical-align: top; text-align : left; padding:0px 4px 0px 4px; white-space: nowrap; background-image: url(tbl_bck110.png)" class="heirarchy"><img alt="." class="heirarchy" src="tbl_spacer.png"/><img alt="." class="heirarchy" src="tbl_blank.png"/><img alt="." class="heirarchy" src="tbl_vjoin_end.png"/><img title="Data Type" style="background-color: white;" alt="." class="heirarchy" src="icon_datatype.gif"/> <a title="Definition" href="#">nameD</a></td>
<td style="vertical-align: top; text-align : left; padding:0px 4px 0px 4px" class="heirarchy"></td>
<td style="vertical-align: top; text-align : left; padding:0px 4px 0px 4px" class="heirarchy">1..1</td>
<td style="vertical-align: top; text-align : left; padding:0px 4px 0px 4px" class="heirarchy"><a href="#">type</a></td>
<td style="vertical-align: top; text-align : left; padding:0px 4px 0px 4px" class="heirarchy">Relevant Records</td>
</tr>
</tbody>
</table>

<a name="legend"> </a>
<p>Key to Type Icons and Flags</p>
<ul>
 <li><img title="Resource" style="background-color: white;" alt="." class="heirarchy" src="icon_resource.png"/>: The base element for a resource (see <a href="resource.html">Resources</a>)</li>
 <li><img title="Element" style="background-color: white;" alt="." class="heirarchy" src="icon_element.gif"/>: An element that is part of the resource and has elements within it defined in the same resource or profile</li>
 <li><img title="Choice of Types" style="background-color: white;" alt="." class="heirarchy" src="icon_choice.gif"/>: An element which can have one of a several different types (see below)</li>
 <li><img title="Primitive Data Type" style="background-color: white;" alt="." class="heirarchy" src="icon_primitive.png"/>: A data type which describes an element that has a value attribute/property</li>
 <li><img title="Data Type" style="background-color: white;" alt="." class="heirarchy" src="icon_datatype.gif"/>: A data type which describes an element that has other elements</li>
 <li><img title="Reference to another Resource" style="background-color: white;" alt="." class="heirarchy" src="icon_reference.png"/>: A element that contains a reference to another resource (see <a href="references.html">references</a>)</li>
 <li><img title="Reference to another Element" style="background-color: white;" alt="." class="heirarchy" src="icon_reuse.png"/>: This element has the same content as another element defined within this resource or profile</li>
 <li><img title="Slice Definition" style="background-color: white;" alt="." class="heirarchy" src="icon_slice.png"/>: Introduction of a set of slices (see <a href="profiling.html#slicing">Slicing</a>)</li>
 <li><img title="Extension" style="background-color: white;" alt="." class="heirarchy" src="icon_extension.png"/>: An extension (see <a href="extensibility.html">Extensibility</a>)</li>
 <li><img title="Complex Extension" style="background-color: white;" alt="." class="heirarchy" src="icon_extension_complex.png"/>: A complex extension - one with nested extensions (see <a href="extensibility.html#complex">Extensibility</a>)</li>
 <li><img title="Simple Extension" style="background-color: white;" alt="." class="heirarchy" src="icon_extension_simple.png"/>: An extension that has a value and no nested extensions (see <a href="extensibility.html">Extensibility</a>)</li>
 <li><img title="Profile" style="background-color: white;" alt="." class="heirarchy" src="icon_profile.png"/>: The root of a logical profile</li>
<!-- dont think this is used <li><img title="Text" style="background-color: white;" alt="." class="heirarchy" src="icon_text.png"/>: Plain text content</li> -->
 <li>?!: This element is a modifying element - see <a href="conformance-rules.html#isModifier">Modifier Elements</a></li>
 <li>S: This element is an element that must be supported - see <a href="conformance-rules.html#mustSupport">Must-Support Elements</a></li>
 <li>Σ: This element is an element that is part of the summary set - see <a href="search.html#summary">Summary Searches</a></li>
 <li>I: This element defines or is affected by invariants - see <a href="conformance-rules.html#invariants">Invariants</a></li>
 <li>NE: This element cannot have extensions (some infrastructural elements only)</li>
</ul>
<p>
Notes:
</p>
<ul>
 <li>Resource and Element names are case-sensitive (though duplicates that differ only in case are never defined)</li>
 <li>Any elements that have a <a href="datatypes.html#primitive">primitive type</a> will have a "value" attribute/property to contain the actual value of the element</li>
 <li>This "value" attribute/property can never be empty. Either it is absent, or it is present with at least one character of non-whitespace content</li>
 <li>Elements are assigned a cardinality that specifies how many times the element may or must appear. </li>
 <li>Unless elements have children defined directly (as nameC does above) they are assigned one or more types. Most of the types are defined in <a href="datatypes.html">the data types</a>. All the type names are hyperlinked to the source definition</li>
 <li>Element reuse: Some data types that have children have the same set of children as some other element defined in the resource. In that case, the type of that element has a "see [name]" where [name] is the name of the element that has the defined children</li>
 <li>Each element name is also a hyperlink to the formal definition of the element in the data dictionary that underlies the exchange formats. </li>
 <li>Any of the elements may have an id attribute to serve as <a href="references.html#id">the target of an internal reference</a>. The id attribute is not shown in this format. Extensions are not always shown, but may appear except where the flag "NE" appears</li>
 <a name="element-rules"> </a>
 <li>FHIR elements can never be empty. If an element is present in the resource, it SHALL have either a value, child elements as defined for its type, or 1 or more <a href="extensibility.html">extensions</a></li>
 <li>Infrastructural elements that are common to all resources are not shown in the logical representation. These are described in the common base classes <a href="resource.html">Resource</a>, and <a href="domainresource.html">DomainResource</a></li>
</ul>

<a name="choice"> </a>
<h3>Choice of Data Types</h3>
<p>
A few elements have a choice of more than one type for their content. All such elements have a name that 
takes the form nnn[x]. The "nnn" part of the name is constant, and the [x] is replaced with the title-cased 
name of the type that is actually used. The table view shows each of these names explicitly.
</p>
<p>
All elements that have a choice of data type have a maximum cardinality of 1. There can only be one 
element for type, of one of the allowed data types. 
</p>
<p>
Note: In object-orientated based implementations, this is naturally represented as a polymorphic property. 
However this is not necessary, and the correct implementation varies according to the particular features 
of the language. In XML schema, these become an xs:choice of element.
</p>


    
<a name="uml"> </a>
<h3>UML</h3>
<p>
The UML diagrams represent the same content as a series of classes that represent
the elements of a resource. 
</p>
<p style="text-alignment: left">
<%svg uml-example%>
</p>
<p>
Where an element can have a choice of data types, these are represented by listing the type names separated by the "|" character. 
The elements and types are links to the formal definitions of the parts. The UML diagrams also show the 
bindings, and these are hyperlinks to the value set details.
</p>
<p>
These UML diagrams are intended to communicate the contents of the resource
to a human, and are not suitable for code generation using standard UML code 
generation tools (see the <a href="downloads.html">eCore reference implementation</a> for UML related code generation). 
</p>
<p>
The actual order of the elements in XML cannot be determined from the diagram, nor whether a UML property becomes an element or an attribute. 
</p>

<a name="wire"> </a>
<h3>Wire Format Representations</h3>

<p>
This specification defines these ways to represent resources when they are exchanged:
</p>
<ul>
 <li><a href="xml.html">XML</a></li>
 <li><a href="json.html">JSON</a></li>
 <li>RDF <i>(Under development)</i></li>
</ul>

<p>
Clients and servers can choose whether to implement in XML or JSON. In 
the interests of interoperability, Servers SHOULD support both formats.
Systems SHALL declare which format(s) they support in their <a href="conformance.html">Conformance Statement</a>. 
If a server receives a request for its conformance statement in
a format it does not otherwise support, it SHALL return a 415 Unsupported Media Type.
</p>

</div>

[%file newfooter%]
</body>
</html>