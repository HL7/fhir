<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentStyleType="text/css" data-diagram-type="SEQUENCE" height="821px" preserveAspectRatio="none" style="width:713px;height:821px;background:#FFFFFF;" version="1.1" viewBox="0 0 713 821" width="713px" zoomAndPan="magnify"><defs><filter height="300%" id="f1pvlml2ghmlxq" width="300%" x="-1" y="-1"><feGaussianBlur result="blurOut" stdDeviation="2"/><feColorMatrix in="blurOut" result="blurOut2" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 .4 0"/><feOffset dx="4" dy="4" in="blurOut2" result="blurOut3"/><feBlend in="SourceGraphic" in2="blurOut3" mode="normal"/></filter></defs><g><rect fill="none" filter="url(#f1pvlml2ghmlxq)" height="400.2031" style="stroke:#000000;stroke-width:2;" width="689.1221" x="10" y="77.5938"/><rect fill="none" filter="url(#f1pvlml2ghmlxq)" height="249.5391" style="stroke:#000000;stroke-width:2;" width="689.1221" x="10" y="491.7969"/><g><title>FHIR Server</title><rect fill="#000000" fill-opacity="0.00000" height="326.9375" width="8" x="108.3984" y="60.5938"/><line style="stroke:#A80036;stroke-width:1;stroke-dasharray:5,5;" x1="112" x2="112" y1="60.5938" y2="387.5313"/></g><line style="stroke:#A80036;stroke-width:1;stroke-dasharray:5,5;" x1="112" x2="112" y1="387.5313" y2="419.5313"/><g><title>FHIR Server</title><rect fill="#000000" fill-opacity="0.00000" height="175.6016" width="8" x="108.3984" y="419.5313"/><line style="stroke:#A80036;stroke-width:1;stroke-dasharray:5,5;" x1="112" x2="112" y1="419.5313" y2="595.1328"/></g><line style="stroke:#A80036;stroke-width:1;stroke-dasharray:5,5;" x1="112" x2="112" y1="595.1328" y2="627.1328"/><g><title>FHIR Server</title><rect fill="#000000" fill-opacity="0.00000" height="82.2031" width="8" x="108.3984" y="627.1328"/><line style="stroke:#A80036;stroke-width:1;stroke-dasharray:5,5;" x1="112" x2="112" y1="627.1328" y2="709.3359"/></g><line style="stroke:#A80036;stroke-width:1;stroke-dasharray:5,5;" x1="112" x2="112" y1="709.3359" y2="741.3359"/><g><title>FHIR Server</title><rect fill="#000000" fill-opacity="0.00000" height="17" width="8" x="108.3984" y="741.3359"/><line style="stroke:#A80036;stroke-width:1;stroke-dasharray:5,5;" x1="112" x2="112" y1="741.3359" y2="758.3359"/></g><g><title>Client</title><rect fill="#000000" fill-opacity="0.00000" height="326.9375" width="8" x="388.2437" y="60.5938"/><line style="stroke:#A80036;stroke-width:1;stroke-dasharray:5,5;" x1="391.9785" x2="391.9785" y1="60.5938" y2="387.5313"/></g><line style="stroke:#A80036;stroke-width:1;stroke-dasharray:5,5;" x1="391.9785" x2="391.9785" y1="387.5313" y2="419.5313"/><g><title>Client</title><rect fill="#000000" fill-opacity="0.00000" height="175.6016" width="8" x="388.2437" y="419.5313"/><line style="stroke:#A80036;stroke-width:1;stroke-dasharray:5,5;" x1="391.9785" x2="391.9785" y1="419.5313" y2="595.1328"/></g><line style="stroke:#A80036;stroke-width:1;stroke-dasharray:5,5;" x1="391.9785" x2="391.9785" y1="595.1328" y2="627.1328"/><g><title>Client</title><rect fill="#000000" fill-opacity="0.00000" height="82.2031" width="8" x="388.2437" y="627.1328"/><line style="stroke:#A80036;stroke-width:1;stroke-dasharray:5,5;" x1="391.9785" x2="391.9785" y1="627.1328" y2="709.3359"/></g><line style="stroke:#A80036;stroke-width:1;stroke-dasharray:5,5;" x1="391.9785" x2="391.9785" y1="709.3359" y2="741.3359"/><g><title>Client</title><rect fill="#000000" fill-opacity="0.00000" height="17" width="8" x="388.2437" y="741.3359"/><line style="stroke:#A80036;stroke-width:1;stroke-dasharray:5,5;" x1="391.9785" x2="391.9785" y1="741.3359" y2="758.3359"/></g><g><title>Email Server</title><rect fill="#000000" fill-opacity="0.00000" height="326.9375" width="8" x="577.3154" y="60.5938"/><line style="stroke:#A80036;stroke-width:1;stroke-dasharray:5,5;" x1="580.5088" x2="580.5088" y1="60.5938" y2="387.5313"/></g><line style="stroke:#A80036;stroke-width:1;stroke-dasharray:5,5;" x1="580.5088" x2="580.5088" y1="387.5313" y2="419.5313"/><g><title>Email Server</title><rect fill="#000000" fill-opacity="0.00000" height="175.6016" width="8" x="577.3154" y="419.5313"/><line style="stroke:#A80036;stroke-width:1;stroke-dasharray:5,5;" x1="580.5088" x2="580.5088" y1="419.5313" y2="595.1328"/></g><line style="stroke:#A80036;stroke-width:1;stroke-dasharray:5,5;" x1="580.5088" x2="580.5088" y1="595.1328" y2="627.1328"/><g><title>Email Server</title><rect fill="#000000" fill-opacity="0.00000" height="82.2031" width="8" x="577.3154" y="627.1328"/><line style="stroke:#A80036;stroke-width:1;stroke-dasharray:5,5;" x1="580.5088" x2="580.5088" y1="627.1328" y2="709.3359"/></g><line style="stroke:#A80036;stroke-width:1;stroke-dasharray:5,5;" x1="580.5088" x2="580.5088" y1="709.3359" y2="741.3359"/><g><title>Email Server</title><rect fill="#000000" fill-opacity="0.00000" height="17" width="8" x="577.3154" y="741.3359"/><line style="stroke:#A80036;stroke-width:1;stroke-dasharray:5,5;" x1="580.5088" x2="580.5088" y1="741.3359" y2="758.3359"/></g><g class="participant participant-head" data-participant="S"><rect fill="#FEFECE" filter="url(#f1pvlml2ghmlxq)" height="50.5938" style="stroke:#A80036;stroke-width:1.5;" width="100.7969" x="60" y="5"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="82.7969" x="69" y="26.9951">FHIR Server</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="62.6104" x="79.0933" y="43.292">REST API</text></g><g class="participant participant-tail" data-participant="S"><rect fill="#FEFECE" filter="url(#f1pvlml2ghmlxq)" height="50.5938" style="stroke:#A80036;stroke-width:1.5;" width="100.7969" x="60" y="757.3359"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="82.7969" x="69" y="779.3311">FHIR Server</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="62.6104" x="79.0933" y="795.6279">REST API</text></g><g class="participant participant-head" data-participant="C"><rect fill="#FEFECE" filter="url(#f1pvlml2ghmlxq)" height="34.2969" style="stroke:#A80036;stroke-width:1.5;" width="58.5303" x="360.9785" y="21.2969"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="40.5303" x="369.9785" y="43.292">Client</text></g><g class="participant participant-tail" data-participant="C"><rect fill="#FEFECE" filter="url(#f1pvlml2ghmlxq)" height="34.2969" style="stroke:#A80036;stroke-width:1.5;" width="58.5303" x="360.9785" y="757.3359"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="40.5303" x="369.9785" y="779.3311">Client</text></g><g class="participant participant-head" data-participant="E"><rect fill="#FEFECE" filter="url(#f1pvlml2ghmlxq)" height="50.5938" style="stroke:#A80036;stroke-width:1.5;" width="131.6133" x="513.5088" y="5"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="89.2021" x="534.7144" y="26.9951">Email Server</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="113.6133" x="522.5088" y="43.292">(SMTP/S, Direct)</text></g><g class="participant participant-tail" data-participant="E"><rect fill="#FEFECE" filter="url(#f1pvlml2ghmlxq)" height="50.5938" style="stroke:#A80036;stroke-width:1.5;" width="131.6133" x="513.5088" y="757.3359"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="89.2021" x="534.7144" y="779.3311">Email Server</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="113.6133" x="522.5088" y="795.6279">(SMTP/S, Direct)</text></g><path d="M10,77.5938 L255.8281,77.5938 L255.8281,88.7266 L245.8281,98.7266 L10,98.7266 L10,77.5938" fill="#EEEEEE" style="stroke:#000000;stroke-width:1;"/><rect fill="none" height="400.2031" style="stroke:#000000;stroke-width:2;" width="689.1221" x="10" y="77.5938"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="196.8281" x="27" y="92.6606">Negotiating a Subscription</text><g class="message" data-participant-1="C" data-participant-2="S"><polygon fill="#A80036" points="123.3984,134.9922,113.3984,138.9922,123.3984,142.9922,119.3984,138.9922" style="stroke:#A80036;stroke-width:1;"/><line style="stroke:#A80036;stroke-width:1;" x1="117.3984" x2="391.2437" y1="138.9922" y2="138.9922"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="9.0454" x="131.3984" y="124.3599">1</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="128.3877" x="148.4438" y="116.7935">Create Subscription</text><text fill="#000000" font-family="monospace" font-size="13" lengthAdjust="spacing" textLength="140.8799" x="148.4438" y="131.9263">channelType:&#160;email</text></g><line style="stroke:#000000;stroke-width:1;stroke-dasharray:2,2;" x1="10" x2="699.1221" y1="147.9922" y2="147.9922"/><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="131.0601" x="17" y="160.2026">[Without handshake]</text><g class="message" data-participant-1="S" data-participant-2="C"><polygon fill="#A80036" points="380.2437,202.0625,390.2437,206.0625,380.2437,210.0625,384.2437,206.0625" style="stroke:#A80036;stroke-width:1;"/><line style="stroke:#A80036;stroke-width:1;stroke-dasharray:2,2;" x1="112.3984" x2="386.2437" y1="206.0625" y2="206.0625"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="9.0454" x="121.3984" y="191.4302">2</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="52.3301" x="138.4438" y="183.8638">Success</text><text fill="#000000" font-family="monospace" font-size="13" lengthAdjust="spacing" textLength="211.3198" x="138.4438" y="198.9966">Subscription.status:&#160;active</text></g><line style="stroke:#000000;stroke-width:1;stroke-dasharray:2,2;" x1="10" x2="699.1221" y1="240.0625" y2="240.0625"/><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="110.4136" x="17" y="252.2729">[With handshake]</text><g class="message" data-participant-1="S" data-participant-2="C"><polygon fill="#A80036" points="380.2437,294.1328,390.2437,298.1328,380.2437,302.1328,384.2437,298.1328" style="stroke:#A80036;stroke-width:1;"/><line style="stroke:#A80036;stroke-width:1;stroke-dasharray:2,2;" x1="112.3984" x2="386.2437" y1="298.1328" y2="298.1328"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="9.0454" x="121.3984" y="283.5005">3</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="52.3301" x="138.4438" y="275.9341">Success</text><text fill="#000000" font-family="monospace" font-size="13" lengthAdjust="spacing" textLength="234.7998" x="138.4438" y="291.0669">Subscription.status:&#160;requested</text></g><g class="message" data-participant-1="S" data-participant-2="E"><polygon fill="#A80036" points="569.3154,327.2656,579.3154,331.2656,569.3154,335.2656,573.3154,331.2656" style="stroke:#A80036;stroke-width:1;"/><line style="stroke:#A80036;stroke-width:1;" x1="112.3984" x2="575.3154" y1="331.2656" y2="331.2656"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="9.0454" x="121.3984" y="324.1997">4</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="299.9712" x="138.4438" y="324.1997">Message with verification, opt-in, opt-out, etc.</text></g><g class="message" data-participant-1="E" data-participant-2="S"><polygon fill="#A80036" points="123.3984,375.5313,113.3984,379.5313,123.3984,383.5313,119.3984,379.5313" style="stroke:#A80036;stroke-width:1;"/><line style="stroke:#A80036;stroke-width:1;stroke-dasharray:2,2;" x1="117.3984" x2="580.3154" y1="379.5313" y2="379.5313"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="9.0454" x="131.3984" y="364.8989">5</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="128.8701" x="148.4438" y="357.3325">SMTP Success, e.g.:</text><text fill="#000000" font-family="monospace" font-size="13" lengthAdjust="spacing" textLength="54.7866" x="148.4438" y="372.4653">250:&#160;OK</text></g><path d="M117,424.5313 L117,468.5313 L353,468.5313 L353,434.5313 L343,424.5313 L117,424.5313" fill="#FBFB77" filter="url(#f1pvlml2ghmlxq)" style="stroke:#A80036;stroke-width:1;"/><path d="M343,424.5313 L343,434.5313 L353,434.5313 L343,424.5313" fill="#FBFB77" style="stroke:#A80036;stroke-width:1;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="188.627" x="125" y="443.5981">Server updates Subscription:</text><text fill="#000000" font-family="monospace" font-size="13" lengthAdjust="spacing" textLength="211.3198" x="125" y="458.731">Subscription.status:&#160;active</text><path d="M10,491.7969 L280.4443,491.7969 L280.4443,502.9297 L270.4443,512.9297 L10,512.9297 L10,491.7969" fill="#EEEEEE" style="stroke:#000000;stroke-width:1;"/><rect fill="none" height="249.5391" style="stroke:#000000;stroke-width:2;" width="689.1221" x="10" y="491.7969"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="221.4443" x="27" y="506.8638">Email Subscription Processing</text><line style="stroke:#000000;stroke-width:1;stroke-dasharray:2,2;" x1="10" x2="699.1221" y1="513.9297" y2="513.9297"/><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="156.2505" x="17" y="526.1401">[Server sends heartbeat]</text><g class="message" data-participant-1="S" data-participant-2="E"><polygon fill="#A80036" points="569.3154,583.1328,579.3154,587.1328,569.3154,591.1328,573.3154,587.1328" style="stroke:#A80036;stroke-width:1;"/><line style="stroke:#A80036;stroke-width:1;" x1="112.3984" x2="575.3154" y1="587.1328" y2="587.1328"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="9.0454" x="121.3984" y="564.9341">6</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="348.3721" x="138.4438" y="549.8013">Message with readable content and attached Bundle:</text><text fill="#000000" font-family="monospace" font-size="13" lengthAdjust="spacing" textLength="297.4131" x="232.3638" y="564.9341">Bundle.type:&#160;subscription-notification</text><text fill="#000000" font-family="monospace" font-size="13" lengthAdjust="spacing" textLength="266.1064" x="138.4438" y="580.0669">SubscriptionStatus.type:&#160;heartbeat</text></g><line style="stroke:#000000;stroke-width:1;stroke-dasharray:2,2;" x1="10" x2="699.1221" y1="628.1328" y2="628.1328"/><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="205.917" x="17" y="640.3433">[Server sends event-notification]</text><g class="message" data-participant-1="S" data-participant-2="E"><polygon fill="#A80036" points="569.3154,697.3359,579.3154,701.3359,569.3154,705.3359,573.3154,701.3359" style="stroke:#A80036;stroke-width:1;"/><line style="stroke:#A80036;stroke-width:1;" x1="112.3984" x2="575.3154" y1="701.3359" y2="701.3359"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="9.0454" x="121.3984" y="679.1372">7</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="348.3721" x="138.4438" y="664.0044">Message with readable content and attached Bundle:</text><text fill="#000000" font-family="monospace" font-size="13" lengthAdjust="spacing" textLength="297.4131" x="232.3638" y="679.1372">Bundle.type:&#160;subscription-notification</text><text fill="#000000" font-family="monospace" font-size="13" lengthAdjust="spacing" textLength="336.5464" x="138.4438" y="694.27">SubscriptionStatus.type:&#160;event-notification</text></g><!--SRC=[pLF1Rjim3BthAmYVDY3nYcAx-52WypAisDe5LO1UUb4anXRgI9v4PokGZnzb9wdT3YZGqtoH89AFVE_HyS4w23wYY7nhLL1RkF64A_n3busjt1OTGOCR6YKibJ7MLN0-UGjajMsLesFuuzae_iDkiB4E9GL5M3r2z8qrGdNaNRTTOn2YVOA0xEktgrkG67OOxjtjGgxWSdcLGVfK13bDBXlBOmxHPnydbzFanLRPvWJzJbwlbX_a3BxOW9hUPwbY8OIeWkzQkC7AarMK-2YGtJhgO5kotWc04kON80ie0pAdIVJUPPckbNFOh1vRB01JromJs4I4EqkrxmWumSHQFI23IPWpMbamZDOOOq8O8-QH57Mn0AN9xf2X0FRx_HFWsz02_kem4Xe67EekO570DTUe2k5t0cQXxCPgbGfdu5kQsyF996Q0f7Ck3KXTS93qF7RbM5xbHMf-_kciW9_VXovvdgV3yQ91i5LDu3ViQV9hy0Mwrh2aSQ9fqIUyhWewqqCBmRUZaGVNHwMm33uDoTOE8XvQHwwAK2Flp9fz7QRwbopikb7h1a5xH-atOVr14IbTeu7FdJCDzjp7-pWyvzGlHHoDC-UHJofdsNF3PC_pK7SQhkSxwFcI0kvug0di_yZbvPHZKixy1G00]--></g></svg>