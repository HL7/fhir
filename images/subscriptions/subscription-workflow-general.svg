<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentStyleType="text/css" data-diagram-type="SEQUENCE" height="1333px" preserveAspectRatio="none" style="width:937px;height:1333px;background:#FFFFFF;" version="1.1" viewBox="0 0 937 1333" width="937px" zoomAndPan="magnify"><defs><filter height="300%" id="f3gxlnb8ksdve" width="300%" x="-1" y="-1"><feGaussianBlur result="blurOut" stdDeviation="2"/><feColorMatrix in="blurOut" result="blurOut2" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 .4 0"/><feOffset dx="4" dy="4" in="blurOut2" result="blurOut3"/><feBlend in="SourceGraphic" in2="blurOut3" mode="normal"/></filter></defs><g><rect fill="none" filter="url(#f3gxlnb8ksdve)" height="153.5313" style="stroke:#000000;stroke-width:2;" width="425.501" x="10" y="61.2969"/><rect fill="none" filter="url(#f3gxlnb8ksdve)" height="277.8359" style="stroke:#000000;stroke-width:2;" width="913.479" x="10" y="228.8281"/><rect fill="none" filter="url(#f3gxlnb8ksdve)" height="748.7422" style="stroke:#000000;stroke-width:2;" width="913.479" x="10" y="520.6641"/><g><title>FHIR Server</title><rect fill="#000000" fill-opacity="0.00000" height="592.5703" width="8" x="118.3984" y="44.2969"/><line style="stroke:#A80036;stroke-width:1;stroke-dasharray:5,5;" x1="122" x2="122" y1="44.2969" y2="636.8672"/></g><line style="stroke:#A80036;stroke-width:1;stroke-dasharray:5,5;" x1="122" x2="122" y1="636.8672" y2="668.8672"/><g><title>FHIR Server</title><rect fill="#000000" fill-opacity="0.00000" height="234.7344" width="8" x="118.3984" y="668.8672"/><line style="stroke:#A80036;stroke-width:1;stroke-dasharray:5,5;" x1="122" x2="122" y1="668.8672" y2="903.6016"/></g><line style="stroke:#A80036;stroke-width:1;stroke-dasharray:5,5;" x1="122" x2="122" y1="903.6016" y2="935.6016"/><g><title>FHIR Server</title><rect fill="#000000" fill-opacity="0.00000" height="191.6016" width="8" x="118.3984" y="935.6016"/><line style="stroke:#A80036;stroke-width:1;stroke-dasharray:5,5;" x1="122" x2="122" y1="935.6016" y2="1127.2031"/></g><line style="stroke:#A80036;stroke-width:1;stroke-dasharray:5,5;" x1="122" x2="122" y1="1127.2031" y2="1159.2031"/><g><title>FHIR Server</title><rect fill="#000000" fill-opacity="0.00000" height="127.2031" width="8" x="118.3984" y="1159.2031"/><line style="stroke:#A80036;stroke-width:1;stroke-dasharray:5,5;" x1="122" x2="122" y1="1159.2031" y2="1286.4063"/></g><g><title>Client</title><rect fill="#000000" fill-opacity="0.00000" height="592.5703" width="8" x="487.1362" y="44.2969"/><line style="stroke:#A80036;stroke-width:1;stroke-dasharray:5,5;" x1="490.8711" x2="490.8711" y1="44.2969" y2="636.8672"/></g><line style="stroke:#A80036;stroke-width:1;stroke-dasharray:5,5;" x1="490.8711" x2="490.8711" y1="636.8672" y2="668.8672"/><g><title>Client</title><rect fill="#000000" fill-opacity="0.00000" height="234.7344" width="8" x="487.1362" y="668.8672"/><line style="stroke:#A80036;stroke-width:1;stroke-dasharray:5,5;" x1="490.8711" x2="490.8711" y1="668.8672" y2="903.6016"/></g><line style="stroke:#A80036;stroke-width:1;stroke-dasharray:5,5;" x1="490.8711" x2="490.8711" y1="903.6016" y2="935.6016"/><g><title>Client</title><rect fill="#000000" fill-opacity="0.00000" height="191.6016" width="8" x="487.1362" y="935.6016"/><line style="stroke:#A80036;stroke-width:1;stroke-dasharray:5,5;" x1="490.8711" x2="490.8711" y1="935.6016" y2="1127.2031"/></g><line style="stroke:#A80036;stroke-width:1;stroke-dasharray:5,5;" x1="490.8711" x2="490.8711" y1="1127.2031" y2="1159.2031"/><g><title>Client</title><rect fill="#000000" fill-opacity="0.00000" height="127.2031" width="8" x="487.1362" y="1159.2031"/><line style="stroke:#A80036;stroke-width:1;stroke-dasharray:5,5;" x1="490.8711" x2="490.8711" y1="1159.2031" y2="1286.4063"/></g><g><title>Endpoint</title><rect fill="#000000" fill-opacity="0.00000" height="218.1172" width="8" x="817.3242" y="418.75"/><line style="stroke:#A80036;stroke-width:1;stroke-dasharray:5,5;" x1="821.1694" x2="821.1694" y1="418.75" y2="636.8672"/></g><line style="stroke:#A80036;stroke-width:1;stroke-dasharray:5,5;" x1="821.1694" x2="821.1694" y1="636.8672" y2="668.8672"/><g><title>Endpoint</title><rect fill="#000000" fill-opacity="0.00000" height="234.7344" width="8" x="817.3242" y="668.8672"/><line style="stroke:#A80036;stroke-width:1;stroke-dasharray:5,5;" x1="821.1694" x2="821.1694" y1="668.8672" y2="903.6016"/></g><line style="stroke:#A80036;stroke-width:1;stroke-dasharray:5,5;" x1="821.1694" x2="821.1694" y1="903.6016" y2="935.6016"/><g><title>Endpoint</title><rect fill="#000000" fill-opacity="0.00000" height="191.6016" width="8" x="817.3242" y="935.6016"/><line style="stroke:#A80036;stroke-width:1;stroke-dasharray:5,5;" x1="821.1694" x2="821.1694" y1="935.6016" y2="1127.2031"/></g><line style="stroke:#A80036;stroke-width:1;stroke-dasharray:5,5;" x1="821.1694" x2="821.1694" y1="1127.2031" y2="1159.2031"/><g><title>Endpoint</title><rect fill="#000000" fill-opacity="0.00000" height="127.2031" width="8" x="817.3242" y="1159.2031"/><line style="stroke:#A80036;stroke-width:1;stroke-dasharray:5,5;" x1="821.1694" x2="821.1694" y1="1159.2031" y2="1286.4063"/></g><g class="participant participant-head" data-participant="S"><rect fill="#FEFECE" filter="url(#f3gxlnb8ksdve)" height="34.2969" style="stroke:#A80036;stroke-width:1.5;" width="100.7969" x="70" y="5"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="82.7969" x="79" y="26.9951">FHIR Server</text></g><g class="participant participant-tail" data-participant="S"><rect fill="#FEFECE" filter="url(#f3gxlnb8ksdve)" height="34.2969" style="stroke:#A80036;stroke-width:1.5;" width="100.7969" x="70" y="1285.4063"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="82.7969" x="79" y="1307.4014">FHIR Server</text></g><g class="participant participant-head" data-participant="C"><rect fill="#FEFECE" filter="url(#f3gxlnb8ksdve)" height="34.2969" style="stroke:#A80036;stroke-width:1.5;" width="58.5303" x="459.8711" y="5"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="40.5303" x="468.8711" y="26.9951">Client</text></g><g class="participant participant-tail" data-participant="C"><rect fill="#FEFECE" filter="url(#f3gxlnb8ksdve)" height="34.2969" style="stroke:#A80036;stroke-width:1.5;" width="58.5303" x="459.8711" y="1285.4063"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="40.5303" x="468.8711" y="1307.4014">Client</text></g><g class="participant participant-tail" data-participant="E"><rect fill="#FEFECE" filter="url(#f3gxlnb8ksdve)" height="34.2969" style="stroke:#A80036;stroke-width:1.5;" width="80.3096" x="779.1694" y="1285.4063"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="62.3096" x="788.1694" y="1307.4014">Endpoint</text></g><path d="M10,61.2969 L228.2412,61.2969 L228.2412,72.4297 L218.2412,82.4297 L10,82.4297 L10,61.2969" fill="#EEEEEE" style="stroke:#000000;stroke-width:1;"/><rect fill="none" height="153.5313" style="stroke:#000000;stroke-width:2;" width="425.501" x="10" y="61.2969"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="169.2412" x="27" y="76.3638">Server Implementation</text><g class="message" data-participant-1="S" data-participant-2="S"><line style="stroke:#A80036;stroke-width:1;" x1="122.3984" x2="164.3984" y1="107.5625" y2="107.5625"/><line style="stroke:#A80036;stroke-width:1;" x1="164.3984" x2="164.3984" y1="107.5625" y2="120.5625"/><line style="stroke:#A80036;stroke-width:1;" x1="122.3984" x2="164.3984" y1="120.5625" y2="120.5625"/><line style="stroke:#A80036;stroke-width:1;" x1="123.3984" x2="133.3984" y1="120.5625" y2="116.5625"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="9.0454" x="131.3984" y="100.4966">1</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="273.0571" x="148.4438" y="100.4966">Implement core Subscription functionality</text></g><g class="message" data-participant-1="S" data-participant-2="S"><line style="stroke:#A80036;stroke-width:1;" x1="122.3984" x2="164.3984" y1="193.8281" y2="193.8281"/><line style="stroke:#A80036;stroke-width:1;" x1="164.3984" x2="164.3984" y1="193.8281" y2="206.8281"/><line style="stroke:#A80036;stroke-width:1;" x1="122.3984" x2="164.3984" y1="206.8281" y2="206.8281"/><line style="stroke:#A80036;stroke-width:1;" x1="123.3984" x2="133.3984" y1="206.8281" y2="202.8281"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="9.0454" x="131.3984" y="179.1958">2</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="230.1851" x="148.4438" y="171.6294">Implement topics and advertise via</text><text fill="#000000" font-family="monospace" font-size="13" lengthAdjust="spacing" textLength="133.0532" x="148.4438" y="186.7622">SubscriptionTopic</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="63.5718" x="285.6294" y="186.7622">resources</text></g><path d="M10,228.8281 L222.687,228.8281 L222.687,239.9609 L212.687,249.9609 L10,249.9609 L10,228.8281" fill="#EEEEEE" style="stroke:#000000;stroke-width:1;"/><rect fill="none" height="277.8359" style="stroke:#000000;stroke-width:2;" width="913.479" x="10" y="228.8281"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="163.687" x="27" y="243.895">Client Implementation</text><line style="stroke:#000000;stroke-width:1;stroke-dasharray:2,2;" x1="10" x2="923.479" y1="250.9609" y2="250.9609"/><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="147.8555" x="17" y="263.1714">[Client Topic Discovery]</text><g class="message" data-participant-1="C" data-participant-2="S"><line style="stroke:#A80036;stroke-width:1;" x1="123.3984" x2="133.3984" y1="309.0313" y2="305.0313"/><line style="stroke:#A80036;stroke-width:1;" x1="123.3984" x2="133.3984" y1="309.0313" y2="313.0313"/><line style="stroke:#A80036;stroke-width:1;" x1="122.3984" x2="490.1362" y1="309.0313" y2="309.0313"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="9.0454" x="141.3984" y="294.3989">3</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="149.3477" x="158.4438" y="286.8325">Search for a supported</text><text fill="#000000" font-family="monospace" font-size="13" lengthAdjust="spacing" textLength="133.0532" x="311.9238" y="286.8325">SubscriptionTopic</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="37.1592" x="444.9771" y="286.8325">, e.g.:</text><text fill="#000000" font-family="monospace" font-size="13" lengthAdjust="spacing" textLength="266.1064" x="158.4438" y="301.9653">GET&#160;.../SubscriptionTopic?[params]</text></g><g class="message" data-participant-1="S" data-participant-2="C"><line style="stroke:#A80036;stroke-width:1;" x1="489.1362" x2="479.1362" y1="357.2969" y2="353.2969"/><line style="stroke:#A80036;stroke-width:1;" x1="489.1362" x2="479.1362" y1="357.2969" y2="361.2969"/><line style="stroke:#A80036;stroke-width:1;stroke-dasharray:2,2;" x1="122.3984" x2="490.1362" y1="357.2969" y2="357.2969"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="9.0454" x="131.3984" y="342.6646">4</text><text fill="#000000" font-family="monospace" font-size="13" lengthAdjust="spacing" textLength="46.96" x="148.4438" y="335.0981">Bundle</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="92.9297" x="199.5361" y="335.0981">with matching</text><text fill="#000000" font-family="monospace" font-size="13" lengthAdjust="spacing" textLength="133.0532" x="148.4438" y="350.231">SubscriptionTopic</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="63.5718" x="285.6294" y="350.231">resources</text></g><line style="stroke:#000000;stroke-width:1;stroke-dasharray:2,2;" x1="10" x2="923.479" y1="366.2969" y2="366.2969"/><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="182.9609" x="17" y="378.5073">[Client Subscription Request]</text><g class="message" data-participant-1="C" data-participant-2="E"><polygon fill="#A80036" points="767.1694,420.3672,777.1694,424.3672,767.1694,428.3672,771.1694,424.3672" style="stroke:#A80036;stroke-width:1;"/><line style="stroke:#A80036;stroke-width:1;" x1="491.1362" x2="773.1694" y1="424.3672" y2="424.3672"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="9.0454" x="500.1362" y="409.7349">5</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="192.9878" x="517.1816" y="402.1685">Create, configure, or initialize</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="153.3911" x="517.1816" y="417.3013">the necessary Endpoint</text></g><rect fill="#FEFECE" filter="url(#f3gxlnb8ksdve)" height="34.2969" style="stroke:#A80036;stroke-width:1.5;" width="80.3096" x="779.1694" y="384.1016"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="62.3096" x="788.1694" y="406.0967">Endpoint</text><g class="message" data-participant-1="C" data-participant-2="S"><line style="stroke:#A80036;stroke-width:1;" x1="123.3984" x2="133.3984" y1="473.6641" y2="469.6641"/><line style="stroke:#A80036;stroke-width:1;" x1="123.3984" x2="133.3984" y1="473.6641" y2="477.6641"/><line style="stroke:#A80036;stroke-width:1;" x1="122.3984" x2="490.1362" y1="473.6641" y2="473.6641"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="9.0454" x="141.3984" y="459.0317">6</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="177.6455" x="158.4438" y="451.4653">Create a Subscription, e.g.:</text><text fill="#000000" font-family="monospace" font-size="13" lengthAdjust="spacing" textLength="164.3599" x="158.4438" y="466.5981">POST&#160;.../Subscription</text></g><path d="M10,520.6641 L388.2974,520.6641 L388.2974,531.7969 L378.2974,541.7969 L10,541.7969 L10,520.6641" fill="#EEEEEE" style="stroke:#000000;stroke-width:1;"/><rect fill="none" height="748.7422" style="stroke:#000000;stroke-width:2;" width="913.479" x="10" y="520.6641"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="329.2974" x="27" y="535.731">Server Accepting or Rejecting a Subscription</text><line style="stroke:#000000;stroke-width:1;stroke-dasharray:2,2;" x1="10" x2="923.479" y1="542.7969" y2="542.7969"/><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="251.8345" x="17" y="555.0073">[Valid Subscription, without Handshake]</text><g class="message" data-participant-1="S" data-participant-2="C"><line style="stroke:#A80036;stroke-width:1;" x1="489.1362" x2="479.1362" y1="585.7344" y2="581.7344"/><line style="stroke:#A80036;stroke-width:1;" x1="489.1362" x2="479.1362" y1="585.7344" y2="589.7344"/><line style="stroke:#A80036;stroke-width:1;stroke-dasharray:2,2;" x1="122.3984" x2="490.1362" y1="585.7344" y2="585.7344"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="9.0454" x="131.3984" y="578.6685">7</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="56.71" x="148.4438" y="578.6685">Success:</text><text fill="#000000" font-family="monospace" font-size="13" lengthAdjust="spacing" textLength="219.1465" x="209.2861" y="578.6685">Subscription.status&#160;=&#160;active</text></g><path d="M127,598.7344 L127,627.7344 L281,627.7344 L281,608.7344 L271,598.7344 L127,598.7344" fill="#FBFB77" filter="url(#f3gxlnb8ksdve)" style="stroke:#A80036;stroke-width:1;"/><path d="M271,598.7344 L271,608.7344 L281,608.7344 L271,598.7344" fill="#FBFB77" style="stroke:#A80036;stroke-width:1;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="129.1494" x="135" y="617.8013">Send notifications...</text><line style="stroke:#000000;stroke-width:1;stroke-dasharray:2,2;" x1="10" x2="923.479" y1="669.8672" y2="669.8672"/><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="284.3672" x="17" y="682.0776">[Valid Subscription, with Handshake Success]</text><g class="message" data-participant-1="S" data-participant-2="C"><line style="stroke:#A80036;stroke-width:1;" x1="489.1362" x2="479.1362" y1="712.8047" y2="708.8047"/><line style="stroke:#A80036;stroke-width:1;" x1="489.1362" x2="479.1362" y1="712.8047" y2="716.8047"/><line style="stroke:#A80036;stroke-width:1;stroke-dasharray:2,2;" x1="122.3984" x2="490.1362" y1="712.8047" y2="712.8047"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="9.0454" x="131.3984" y="705.7388">8</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="115.813" x="148.4438" y="705.7388">Success: status =</text><text fill="#000000" font-family="monospace" font-size="13" lengthAdjust="spacing" textLength="70.4399" x="268.3892" y="705.7388">requested</text></g><g class="message" data-participant-1="S" data-participant-2="E"><line style="stroke:#A80036;stroke-width:1;" x1="819.3242" x2="809.3242" y1="745.9375" y2="741.9375"/><line style="stroke:#A80036;stroke-width:1;" x1="819.3242" x2="809.3242" y1="745.9375" y2="749.9375"/><line style="stroke:#A80036;stroke-width:1;" x1="122.3984" x2="820.3242" y1="745.9375" y2="745.9375"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="9.0454" x="131.3984" y="738.8716">9</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="72.7378" x="148.4438" y="738.8716">Handshake</text></g><g class="message" data-participant-1="E" data-participant-2="S"><line style="stroke:#A80036;stroke-width:1;" x1="123.3984" x2="133.3984" y1="794.2031" y2="790.2031"/><line style="stroke:#A80036;stroke-width:1;" x1="123.3984" x2="133.3984" y1="794.2031" y2="798.2031"/><line style="stroke:#A80036;stroke-width:1;stroke-dasharray:2,2;" x1="122.3984" x2="820.3242" y1="794.2031" y2="794.2031"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="18.0908" x="141.3984" y="779.5708">10</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="89.4893" x="167.4893" y="772.0044">Success, e.g.:</text><text fill="#000000" font-family="monospace" font-size="13" lengthAdjust="spacing" textLength="54.7866" x="167.4893" y="787.1372">200:&#160;OK</text></g><path d="M127,807.2031 L127,851.2031 L363,851.2031 L363,817.2031 L353,807.2031 L127,807.2031" fill="#FBFB77" filter="url(#f3gxlnb8ksdve)" style="stroke:#A80036;stroke-width:1;"/><path d="M353,807.2031 L353,817.2031 L363,817.2031 L353,807.2031" fill="#FBFB77" style="stroke:#A80036;stroke-width:1;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="136.3667" x="135" y="826.27">Update Subscription:</text><text fill="#000000" font-family="monospace" font-size="13" lengthAdjust="spacing" textLength="211.3198" x="135" y="841.4028">Subscription.status:&#160;active</text><path d="M127,865.4688 L127,894.4688 L281,894.4688 L281,875.4688 L271,865.4688 L127,865.4688" fill="#FBFB77" filter="url(#f3gxlnb8ksdve)" style="stroke:#A80036;stroke-width:1;"/><path d="M271,865.4688 L271,875.4688 L281,875.4688 L271,865.4688" fill="#FBFB77" style="stroke:#A80036;stroke-width:1;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="129.1494" x="135" y="884.5356">Send notifications...</text><line style="stroke:#000000;stroke-width:1;stroke-dasharray:2,2;" x1="10" x2="923.479" y1="936.6016" y2="936.6016"/><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="278.2119" x="17" y="948.812">[Valid Subscription, with Handshake Failure]</text><g class="message" data-participant-1="S" data-participant-2="C"><line style="stroke:#A80036;stroke-width:1;" x1="489.1362" x2="479.1362" y1="979.5391" y2="975.5391"/><line style="stroke:#A80036;stroke-width:1;" x1="489.1362" x2="479.1362" y1="979.5391" y2="983.5391"/><line style="stroke:#A80036;stroke-width:1;stroke-dasharray:2,2;" x1="122.3984" x2="490.1362" y1="979.5391" y2="979.5391"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="18.0908" x="131.3984" y="972.4731">11</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="56.71" x="157.4893" y="972.4731">Success:</text><text fill="#000000" font-family="monospace" font-size="13" lengthAdjust="spacing" textLength="242.6265" x="218.3315" y="972.4731">Subscription.status&#160;=&#160;requested</text></g><g class="message" data-participant-1="S" data-participant-2="E"><line style="stroke:#A80036;stroke-width:1;" x1="819.3242" x2="809.3242" y1="1012.6719" y2="1008.6719"/><line style="stroke:#A80036;stroke-width:1;" x1="819.3242" x2="809.3242" y1="1012.6719" y2="1016.6719"/><line style="stroke:#A80036;stroke-width:1;" x1="122.3984" x2="820.3242" y1="1012.6719" y2="1012.6719"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="18.0908" x="131.3984" y="1005.606">12</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="72.7378" x="157.4893" y="1005.606">Handshake</text></g><g class="message" data-participant-1="E" data-participant-2="S"><line style="stroke:#A80036;stroke-width:1;" x1="123.3984" x2="133.3984" y1="1060.9375" y2="1056.9375"/><line style="stroke:#A80036;stroke-width:1;" x1="123.3984" x2="133.3984" y1="1060.9375" y2="1064.9375"/><line style="stroke:#A80036;stroke-width:1;stroke-dasharray:2,2;" x1="122.3984" x2="820.3242" y1="1060.9375" y2="1060.9375"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="18.0908" x="141.3984" y="1046.3052">13</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="81.4087" x="167.4893" y="1038.7388">Failure, e.g.:</text><text fill="#000000" font-family="monospace" font-size="13" lengthAdjust="spacing" textLength="109.5732" x="167.4893" y="1053.8716">404:&#160;Not&#160;Found</text></g><path d="M127,1073.9375 L127,1117.9375 L355,1117.9375 L355,1083.9375 L345,1073.9375 L127,1073.9375" fill="#FBFB77" filter="url(#f3gxlnb8ksdve)" style="stroke:#A80036;stroke-width:1;"/><path d="M345,1073.9375 L345,1083.9375 L355,1083.9375 L345,1073.9375" fill="#FBFB77" style="stroke:#A80036;stroke-width:1;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="136.3667" x="135" y="1093.0044">Update Subscription:</text><text fill="#000000" font-family="monospace" font-size="13" lengthAdjust="spacing" textLength="203.4932" x="135" y="1108.1372">Subscription.status:&#160;error</text><line style="stroke:#000000;stroke-width:1;stroke-dasharray:2,2;" x1="10" x2="923.479" y1="1160.2031" y2="1160.2031"/><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="133.998" x="17" y="1172.4136">[Invalid Subscription]</text><g class="message" data-participant-1="S" data-participant-2="C"><line style="stroke:#A80036;stroke-width:1;" x1="489.1362" x2="479.1362" y1="1218.2734" y2="1214.2734"/><line style="stroke:#A80036;stroke-width:1;" x1="489.1362" x2="479.1362" y1="1218.2734" y2="1222.2734"/><line style="stroke:#A80036;stroke-width:1;stroke-dasharray:2,2;" x1="122.3984" x2="490.1362" y1="1218.2734" y2="1218.2734"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="18.0908" x="131.3984" y="1203.6411">14</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="81.4087" x="157.4893" y="1196.0747">Failure, e.g.:</text><text fill="#000000" font-family="monospace" font-size="13" lengthAdjust="spacing" textLength="125.2266" x="157.4893" y="1211.2075">400:&#160;Bad&#160;Request</text></g><path d="M127,1231.2734 L127,1260.2734 L336,1260.2734 L336,1241.2734 L326,1231.2734 L127,1231.2734" fill="#FBFB77" filter="url(#f3gxlnb8ksdve)" style="stroke:#A80036;stroke-width:1;"/><path d="M326,1231.2734 L326,1241.2734 L336,1241.2734 L326,1231.2734" fill="#FBFB77" style="stroke:#A80036;stroke-width:1;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="184.5454" x="135" y="1250.3403">No subscription was created</text>
<!--SRC=[jLJTJzim47_FNt7ACtGLOY-HnWHT6MWJ8CBsikx1s9VqHcfd_YXZue_VEKcBMxfDI5iU8YTtlljzdEtkI8Cr3ZF7grPOiO0Bu_46V_ZZXcgzGEsXmSed2LT2AT8r76pyivuajKBxLVZrE8b_f0eRqbXwAppM3-1CGoeJmHiT5hTeiwnzAW7vwTdvDPHebsXp40xAZV2aeOYhUpWuoRBQcj0E6-1yqJOOaGjFHcS09UpFPb0MJn6GnYAKuTP9IsrCWofe6HUY8V_0cnuV7tTlzQObwK1e1K9nFqyEOKbYflCyhNWJy_8SB3eJh4INeLOhg0E5BQZOSAaXr6s7T-IauIOHqGJsZuuYbXA5bNEeZ0K1BhIjiHuLx6o_1pYgHqK4ztvw0wFHwDMphBTVEfVSrppdDXPzi9ghdGIj6cG6z-Jdi11UpjdOlzFSeB6XyJL-3-WyDv4MUH1WgbLhYDFOnkb04QO5JBhm7jkaAwg3vIMJ9KsUs9-VEDD-Zg2HspbX7zPrKfNw6gnG2Y6Hu-goVAv7fq2qFl5g6AjZAP5pUBGPoZL-GzbzRDRlkNzca6ghRnJH10zdF3XkBkwmdwu8TiAM1Xcv55icZXnFHd3m1WHtMs87J_C91Klrt8Ef-ddWMUI_L97i1ianBKwCxp_YUGAp0h0Rr1f5djlUGbGTbB8JcmrBMKtx0kMwG2BwmNXSmEM7NJooU9m_jIgQba8jki1ENOfKba44_5yAdGfgU19VPjkBv1ew978TZW-BU2F3gU73-CzKGskDtHPjhSMvNZvJOuFrBfniwubGgnF-MwGNXY-iv4QuvuFVtmKgHSEBNm00]
@startuml
skin rose
skinparam NoteTextAlignment left
skinparam Padding 2
skinparam ParticipantPadding 50
skinparam LifelineStrategy solid
autonumber

participant "FHIR Server" as S
participant Client      as C

group Server Implementation
  S -\\ S: Implement core Subscription functionality
  |||
  S -\\ S: Implement topics and advertise via\n""SubscriptionTopic"" resources
end

group Client Implementation
else Client Topic Discovery
  C ->> S: Search for a supported ""SubscriptionTopic"", e.g.:\n""GET .../SubscriptionTopic?[params]""
  return ""Bundle"" with matching\n""SubscriptionTopic"" resources

else Client Subscription Request
  create Endpoint as E
  C -> E: Create, configure, or initialize\nthe necessary Endpoint
  C ->> S: Create a Subscription, e.g.:\n""POST .../Subscription""
  |||
end

group Server Accepting or Rejecting a Subscription
else Valid Subscription, without Handshake
  S \-\->> C: Success: ""Subscription.status = active""
  note right of S: Send notifications...
  ...
else Valid Subscription, with Handshake Success
  S \-\->> C: Success: status = ""requested""
  S ->> E: Handshake
  E \-\->> S: Success, e.g.:\n""200: OK""
  note right of S
    Update Subscription:
    ""Subscription.status: active""
  end note
  note right of S: Send notifications...
  ...
else Valid Subscription, with Handshake Failure
  S \-\->> C: Success: ""Subscription.status = requested""
  S ->> E: Handshake
  E \-\->> S: Failure, e.g.:\n""404: Not Found""
  note right of S
    Update Subscription:
    ""Subscription.status: error""
  end note
  ...
else Invalid Subscription
  S \-\->> C: Failure, e.g.:\n""400: Bad Request""
  note right of S
    No subscription was created
  end note
end
@enduml

--></g></svg>