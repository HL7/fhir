<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentScriptType="application/ecmascript" contentStyleType="text/css" height="1160px" preserveAspectRatio="none" style="width:534px;height:1160px;background:#FFFFFF;" version="1.1" viewBox="0 0 534 1160" width="534px" zoomAndPan="magnify"><defs><filter height="300%" id="f1nfqlmxdholrd" width="300%" x="-1" y="-1"><feGaussianBlur result="blurOut" stdDeviation="2.0"/><feColorMatrix in="blurOut" result="blurOut2" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 .4 0"/><feOffset dx="4.0" dy="4.0" in="blurOut2" result="blurOut3"/><feBlend in="SourceGraphic" in2="blurOut3" mode="normal"/></filter></defs><g><rect fill="#FFFFFF" filter="url(#f1nfqlmxdholrd)" height="370.7266" style="stroke:#000000;stroke-width:2.0;" width="510.5" x="10" y="61.2969"/><rect fill="#FFFFFF" filter="url(#f1nfqlmxdholrd)" height="117.6641" style="stroke:#000000;stroke-width:2.0;" width="510.5" x="10" y="504.2891"/><rect fill="#FFFFFF" filter="url(#f1nfqlmxdholrd)" height="118.2656" style="stroke:#000000;stroke-width:2.0;" width="510.5" x="10" y="635.9531"/><rect fill="#FFFFFF" filter="url(#f1nfqlmxdholrd)" height="134.5313" style="stroke:#000000;stroke-width:2.0;" width="510.5" x="10" y="768.2188"/><rect fill="#FFFFFF" filter="url(#f1nfqlmxdholrd)" height="179.9297" style="stroke:#000000;stroke-width:2.0;" width="510.5" x="10" y="916.75"/><line style="stroke:#A80036;stroke-width:1.0;" x1="120" x2="120" y1="44.2969" y2="82.4297"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:1.0,4.0;" x1="120" x2="120" y1="82.4297" y2="114.4297"/><line style="stroke:#A80036;stroke-width:1.0;" x1="120" x2="120" y1="114.4297" y2="241.2266"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:1.0,4.0;" x1="120" x2="120" y1="241.2266" y2="273.2266"/><line style="stroke:#A80036;stroke-width:1.0;" x1="120" x2="120" y1="273.2266" y2="400.0234"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:1.0,4.0;" x1="120" x2="120" y1="400.0234" y2="432.0234"/><line style="stroke:#A80036;stroke-width:1.0;" x1="120" x2="120" y1="432.0234" y2="657.0859"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:1.0,4.0;" x1="120" x2="120" y1="657.0859" y2="689.0859"/><line style="stroke:#A80036;stroke-width:1.0;" x1="120" x2="120" y1="689.0859" y2="722.2188"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:1.0,4.0;" x1="120" x2="120" y1="722.2188" y2="754.2188"/><line style="stroke:#A80036;stroke-width:1.0;" x1="120" x2="120" y1="754.2188" y2="870.75"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:1.0,4.0;" x1="120" x2="120" y1="870.75" y2="902.75"/><line style="stroke:#A80036;stroke-width:1.0;" x1="120" x2="120" y1="902.75" y2="1064.6797"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:1.0,4.0;" x1="120" x2="120" y1="1064.6797" y2="1096.6797"/><line style="stroke:#A80036;stroke-width:1.0;" x1="120" x2="120" y1="1096.6797" y2="1113.6797"/><line style="stroke:#A80036;stroke-width:1.0;" x1="412.5" x2="412.5" y1="44.2969" y2="82.4297"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:1.0,4.0;" x1="412.5" x2="412.5" y1="82.4297" y2="114.4297"/><line style="stroke:#A80036;stroke-width:1.0;" x1="412.5" x2="412.5" y1="114.4297" y2="241.2266"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:1.0,4.0;" x1="412.5" x2="412.5" y1="241.2266" y2="273.2266"/><line style="stroke:#A80036;stroke-width:1.0;" x1="412.5" x2="412.5" y1="273.2266" y2="400.0234"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:1.0,4.0;" x1="412.5" x2="412.5" y1="400.0234" y2="432.0234"/><line style="stroke:#A80036;stroke-width:1.0;" x1="412.5" x2="412.5" y1="432.0234" y2="657.0859"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:1.0,4.0;" x1="412.5" x2="412.5" y1="657.0859" y2="689.0859"/><line style="stroke:#A80036;stroke-width:1.0;" x1="412.5" x2="412.5" y1="689.0859" y2="722.2188"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:1.0,4.0;" x1="412.5" x2="412.5" y1="722.2188" y2="754.2188"/><line style="stroke:#A80036;stroke-width:1.0;" x1="412.5" x2="412.5" y1="754.2188" y2="870.75"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:1.0,4.0;" x1="412.5" x2="412.5" y1="870.75" y2="902.75"/><line style="stroke:#A80036;stroke-width:1.0;" x1="412.5" x2="412.5" y1="902.75" y2="1064.6797"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:1.0,4.0;" x1="412.5" x2="412.5" y1="1064.6797" y2="1096.6797"/><line style="stroke:#A80036;stroke-width:1.0;" x1="412.5" x2="412.5" y1="1096.6797" y2="1113.6797"/><rect fill="#FEFECE" filter="url(#f1nfqlmxdholrd)" height="34.2969" style="stroke:#A80036;stroke-width:1.5;" width="97" x="70" y="5"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="79" x="79" y="26.9951">FHIR Server</text><rect fill="#FEFECE" filter="url(#f1nfqlmxdholrd)" height="34.2969" style="stroke:#A80036;stroke-width:1.5;" width="97" x="70" y="1112.6797"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="79" x="79" y="1134.6748">FHIR Server</text><rect fill="#FEFECE" filter="url(#f1nfqlmxdholrd)" height="34.2969" style="stroke:#A80036;stroke-width:1.5;" width="92" x="364.5" y="5"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="74" x="373.5" y="26.9951">Subscriber</text><rect fill="#FEFECE" filter="url(#f1nfqlmxdholrd)" height="34.2969" style="stroke:#A80036;stroke-width:1.5;" width="92" x="364.5" y="1112.6797"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="74" x="373.5" y="1134.6748">Subscriber</text><path d="M10,61.2969 L190,61.2969 L190,72.2969 L180,82.2969 L10,82.2969 L10,61.2969 " fill="#EEEEEE" style="stroke:#000000;stroke-width:1.0;"/><rect fill="none" height="370.7266" style="stroke:#000000;stroke-width:2.0;" width="510.5" x="10" y="61.2969"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="131" x="27" y="76.3638">Normal Operation</text><polygon fill="#A80036" points="400.5,196.0938,410.5,200.0938,400.5,204.0938,404.5,200.0938" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="120.5" x2="406.5" y1="200.0938" y2="200.0938"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="72" x="129.5" y="132.4966">Notification</text><text fill="#000000" font-family="monospace" font-size="13" lengthAdjust="spacing" textLength="48" x="205.5" y="132.4966">Bundle</text><text fill="#000000" font-family="monospace" font-size="13" lengthAdjust="spacing" textLength="40" x="129.5" y="147.6294">type:</text><text fill="#000000" font-family="monospace" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="144" x="177.5" y="147.6294">event-notification</text><text fill="#000000" font-family="monospace" font-size="13" lengthAdjust="spacing" textLength="232" x="129.5" y="162.7622">eventsSinceSubscriptionStart:</text><text fill="#000000" font-family="monospace" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="16" x="377.5" y="162.7622">25</text><text fill="#000000" font-family="monospace" font-size="13" lengthAdjust="spacing" textLength="240" x="129.5" y="177.895">notificationEvent.eventNumber:</text><text fill="#000000" font-family="monospace" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="16" x="377.5" y="177.895">25</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="0" x="133.5" y="193.0278"/><polygon fill="#A80036" points="131.5,229.2266,121.5,233.2266,131.5,237.2266,127.5,233.2266" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="125.5" x2="411.5" y1="233.2266" y2="233.2266"/><text fill="#000000" font-family="monospace" font-size="13" lengthAdjust="spacing" textLength="56" x="139.5" y="226.1606">200: OK</text><polygon fill="#A80036" points="400.5,354.8906,410.5,358.8906,400.5,362.8906,404.5,358.8906" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="120.5" x2="406.5" y1="358.8906" y2="358.8906"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="72" x="129.5" y="291.2935">Notification</text><text fill="#000000" font-family="monospace" font-size="13" lengthAdjust="spacing" textLength="48" x="205.5" y="291.2935">Bundle</text><text fill="#000000" font-family="monospace" font-size="13" lengthAdjust="spacing" textLength="40" x="129.5" y="306.4263">type:</text><text fill="#000000" font-family="monospace" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="144" x="177.5" y="306.4263">event-notification</text><text fill="#000000" font-family="monospace" font-size="13" lengthAdjust="spacing" textLength="232" x="129.5" y="321.5591">eventsSinceSubscriptionStart:</text><text fill="#000000" font-family="monospace" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="16" x="377.5" y="321.5591">26</text><text fill="#000000" font-family="monospace" font-size="13" lengthAdjust="spacing" textLength="240" x="129.5" y="336.6919">notificationEvent.eventNumber:</text><text fill="#000000" font-family="monospace" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="16" x="377.5" y="336.6919">26</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="0" x="133.5" y="351.8247"/><polygon fill="#A80036" points="131.5,388.0234,121.5,392.0234,131.5,396.0234,127.5,392.0234" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="125.5" x2="411.5" y1="392.0234" y2="392.0234"/><text fill="#000000" font-family="monospace" font-size="13" lengthAdjust="spacing" textLength="56" x="139.5" y="384.9575">200: OK</text><path d="M206,444.0234 L206,488.0234 L403,488.0234 L403,454.0234 L393,444.0234 L206,444.0234 " fill="#FBFB77" filter="url(#f1nfqlmxdholrd)" style="stroke:#A80036;stroke-width:1.0;"/><path d="M393,444.0234 L393,454.0234 L403,454.0234 L393,444.0234 " fill="#FBFB77" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="172" x="214" y="463.0903">Heartbeat timeout elapses</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="144" x="214" y="478.2231">without a notification...</text><path d="M10,504.2891 L253,504.2891 L253,515.2891 L243,525.2891 L10,525.2891 L10,504.2891 " fill="#EEEEEE" style="stroke:#000000;stroke-width:1.0;"/><rect fill="none" height="117.6641" style="stroke:#000000;stroke-width:2.0;" width="510.5" x="10" y="504.2891"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="194" x="27" y="519.356">Check Subscription Status</text><polygon fill="#A80036" points="131.5,546.5547,121.5,550.5547,131.5,554.5547,127.5,550.5547" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="125.5" x2="411.5" y1="550.5547" y2="550.5547"/><text fill="#000000" font-family="monospace" font-size="13" lengthAdjust="spacing" textLength="264" x="139.5" y="543.4888">GET .../Subscription/&lt;id&gt;/$status</text><polygon fill="#A80036" points="400.5,609.9531,410.5,613.9531,400.5,617.9531,404.5,613.9531" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="120.5" x2="406.5" y1="613.9531" y2="613.9531"/><text fill="#000000" font-family="monospace" font-size="13" lengthAdjust="spacing" textLength="144" x="129.5" y="576.6216">SubscriptionStatus</text><text fill="#000000" font-family="monospace" font-size="13" lengthAdjust="spacing" textLength="56" x="129.5" y="591.7544">status:</text><text fill="#000000" font-family="monospace" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="40" x="193.5" y="591.7544">error</text><text fill="#000000" font-family="monospace" font-size="13" lengthAdjust="spacing" textLength="232" x="129.5" y="606.8872">eventsSinceSubscriptionStart:</text><text fill="#000000" font-family="monospace" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="16" x="369.5" y="606.8872">28</text><path d="M10,635.9531 L189,635.9531 L189,646.9531 L179,656.9531 L10,656.9531 L10,635.9531 " fill="#EEEEEE" style="stroke:#000000;stroke-width:1.0;"/><rect fill="none" height="118.2656" style="stroke:#000000;stroke-width:2.0;" width="510.5" x="10" y="635.9531"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="130" x="27" y="651.02">Recovery Process</text><polygon fill="#A80036" points="131.5,710.2188,121.5,714.2188,131.5,718.2188,127.5,714.2188" style="stroke:#A80036;stroke-width:1.0;"/><polygon fill="#A80036" points="400.5,710.2188,410.5,714.2188,400.5,718.2188,404.5,714.2188" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="125.5" x2="406.5" y1="714.2188" y2="714.2188"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="96" x="139.5" y="707.1528">FHIR API calls...</text><path d="M10,768.2188 L230,768.2188 L230,779.2188 L220,789.2188 L10,789.2188 L10,768.2188 " fill="#EEEEEE" style="stroke:#000000;stroke-width:1.0;"/><rect fill="none" height="134.5313" style="stroke:#000000;stroke-width:2.0;" width="510.5" x="10" y="768.2188"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="171" x="27" y="783.2856">Re-enable Subscription</text><polygon fill="#A80036" points="131.5,825.6172,121.5,829.6172,131.5,833.6172,127.5,829.6172" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="125.5" x2="411.5" y1="829.6172" y2="829.6172"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="130" x="139.5" y="807.4185">Update Subscription</text><text fill="#000000" font-family="monospace" font-size="13" lengthAdjust="spacing" textLength="136" x="139.5" y="822.5513">status: requested</text><polygon fill="#A80036" points="400.5,858.75,410.5,862.75,400.5,866.75,404.5,862.75" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="120.5" x2="406.5" y1="862.75" y2="862.75"/><text fill="#000000" font-family="monospace" font-size="13" lengthAdjust="spacing" textLength="56" x="129.5" y="855.6841">200: OK</text><path d="M10,916.75 L254,916.75 L254,927.75 L244,937.75 L10,937.75 L10,916.75 " fill="#EEEEEE" style="stroke:#000000;stroke-width:1.0;"/><rect fill="none" height="179.9297" style="stroke:#000000;stroke-width:2.0;" width="510.5" x="10" y="916.75"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="195" x="27" y="931.8169">Resume Normal Operation</text><polygon fill="#A80036" points="400.5,1019.5469,410.5,1023.5469,400.5,1027.5469,404.5,1023.5469" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="120.5" x2="406.5" y1="1023.5469" y2="1023.5469"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="72" x="129.5" y="955.9497">Notification</text><text fill="#000000" font-family="monospace" font-size="13" lengthAdjust="spacing" textLength="48" x="205.5" y="955.9497">Bundle</text><text fill="#000000" font-family="monospace" font-size="13" lengthAdjust="spacing" textLength="40" x="129.5" y="971.0825">type:</text><text fill="#000000" font-family="monospace" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="144" x="177.5" y="971.0825">event-notification</text><text fill="#000000" font-family="monospace" font-size="13" lengthAdjust="spacing" textLength="232" x="129.5" y="986.2153">eventsSinceSubscriptionStart:</text><text fill="#000000" font-family="monospace" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="16" x="377.5" y="986.2153">29</text><text fill="#000000" font-family="monospace" font-size="13" lengthAdjust="spacing" textLength="240" x="129.5" y="1001.3481">notificationEvent.eventNumber:</text><text fill="#000000" font-family="monospace" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="16" x="377.5" y="1001.3481">29</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="0" x="133.5" y="1016.481"/><polygon fill="#A80036" points="131.5,1052.6797,121.5,1056.6797,131.5,1060.6797,127.5,1056.6797" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="125.5" x2="411.5" y1="1056.6797" y2="1056.6797"/><text fill="#000000" font-family="monospace" font-size="13" lengthAdjust="spacing" textLength="56" x="139.5" y="1049.6138">200: OK</text><!--MD5=[8bc21032a12376d0d2187159d86ffe13]
@startuml
skinparam NoteTextAlignment left
skinparam Padding 2
skinparam ParticipantPadding 50
skinparam LifelineStrategy solid

participant "FHIR Server" as S
participant Subscriber    as C

group Normal Operation
  ...
  S -> C: Notification ""Bundle""\n""type: **event-notification**""\n""eventsSinceSubscriptionStart:  **25**""\n""notificationEvent.eventNumber: **25**""\n
  return ""200: OK""
  ...
  S -> C: Notification ""Bundle""\n""type: **event-notification**""\n""eventsSinceSubscriptionStart:  **26**""\n""notificationEvent.eventNumber: **26**""\n
  return ""200: OK""
  ...
end

note left of C
  Heartbeat timeout elapses
  without a notification...
end note

group Check Subscription Status
  C -> S: ""GET .../Subscription/<id>/$status""
  return ""SubscriptionStatus""\n""status: **error**""\n""eventsSinceSubscriptionStart: **28**""
end

group Recovery Process
  ...
  C <-> S: FHIR API calls...
  ...
end

group Re-enable Subscription
  C -> S:Update Subscription\n""status: requested""
  return ""200: OK""
  ...
end

group Resume Normal Operation
  S -> C: Notification ""Bundle""\n""type: **event-notification**""\n""eventsSinceSubscriptionStart:  **29**""\n""notificationEvent.eventNumber: **29**""\n
  return ""200: OK""
  ...
end
@enduml

PlantUML version 1.2021.16(Wed Dec 08 17:25:22 UTC 2021)
(GPL source distribution)
Java Runtime: OpenJDK Runtime Environment
JVM: OpenJDK 64-Bit Server VM
Default Encoding: UTF-8
Language: en
Country: US
--></g></svg>